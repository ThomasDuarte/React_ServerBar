/* ORGanizer for Salesforce - v10000.0.9.53 
 * Author: Enrico Murru (https://organizer.solutions/)
 * Copyright 2016-2024
 */
!function(exports,global){define("quicklogin",["global","constants","jquery","popup-utils","typeahead"],function($G,$C,$,PopupUtils){"use sctrict";var chrome=$G.chrome,window=$G.window,_pinConfiguration=(PopupUtils.newDebugger("ORGanizer: quick-login"),null);return{render:function(options){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var accounts=options.accounts,pinConfiguration=options.pinConfiguration,callback=options.onSelectCallback;_pinConfiguration=pinConfiguration;var typeaheadCmp=$('input.username[name="username"]#username').addClass("ui-quick-login"),_firstQuickLink=null,substringMatcher=function(accounts){return function(q,cb){var matches;if(_firstQuickLink=null,matches=[],q=q||"",q=q.trim()){if(substrRegex=new RegExp(escapeRegExp(q),"i"),matches.push({n:"",g:"",u:q}),_pinConfiguration)matches.push({n:chrome.i18n.getMessage("content_quicklink_pin_expired"),g:chrome.i18n.getMessage("content_quicklink_pin_expired_message"),u:""});else{$.each(accounts||[],function(i,acc){acc.nDisplay=null,acc.uDisplay=null;var match=PopupUtils.fuzzySearch(q,acc.n);if(acc.nDisplay=match.formattedString,match.matches||(match=PopupUtils.fuzzySearch(q,acc.u),acc.uDisplay=match.formattedString),match.matches){if(!acc.p)return;Number.isInteger(parseInt(acc.r))&&(acc.r=PopupUtils.StandardLoginURLs[parseInt(acc.r)]),acc.r||(acc.r=PopupUtils.StandardLoginURLs[0]);var isSandboxLoginPage=window.location.href.toLowerCase().indexOf(".cs")>0&&window.location.href.toLowerCase().indexOf(".my.salesforce.com")>0||window.location.href.toLowerCase().indexOf("test.salesforce.com")>0,isProdLoginPage=window.location.href.toLowerCase().indexOf(".cs")<0&&window.location.href.toLowerCase().indexOf(".my.salesforce.com")>0||window.location.href.toLowerCase().indexOf("login.salesforce.com")>0,isSandboxLogin=acc.r.toLowerCase().indexOf(".cs")>0&&acc.r.toLowerCase().indexOf(".my.salesforce.com")>0||acc.r.toLowerCase().indexOf("test.salesforce.com")>0,isProdLogin=acc.r.toLowerCase().indexOf(".cs")<0&&acc.r.toLowerCase().indexOf(".my.salesforce.com")>0||acc.r.toLowerCase().indexOf("login.salesforce.com")>0;(window.location.href.toLowerCase().indexOf(acc.r.toLowerCase())>=0||isSandboxLogin&&isSandboxLoginPage||isProdLoginPage&&isProdLogin)&&matches.push(acc)}})}matches&&matches.length&&(_firstQuickLink||(_firstQuickLink=matches[0]))}cb(matches)}};return typeaheadCmp.typeahead({hint:!1,highlight:!1,minLength:0},{name:"quicklogin",display:function(suggestion){return suggestion.u},limit:50,source:substringMatcher(accounts),templates:{suggestion:function(obj){function resetFormatting(v){return $("<span/>").html($("<span/>").text(v).html().replace(/\[_b_\]/gi,"<b>").replace(/\[_\/b_\]/gi,"</b>")).html()}var el="<div><span>";return obj.n&&(el+=resetFormatting(obj.nDisplay||obj.n)),obj.g&&(el+=" <small>("+$("<span/>").text(obj.g).html()+")</small>"),el+="</span>",obj.u&&(obj.g||obj.n)&&(el+=" - "),obj.u&&(el+="<em>"+resetFormatting(obj.uDisplay||obj.u)),el+="</div>"}}}),typeaheadCmp.focus().on("typeahead:select",function(ev,selected){return _firstQuickLink=null,callback&&callback(selected,typeaheadCmp)}).on("keydown",function(e){if(13===e.keyCode&&(typeaheadCmp.blur(),e.preventDefault(),_firstQuickLink))return callback&&callback(_firstQuickLink,typeaheadCmp)}),$(".twitter-typeahead").addClass("ui-typeahead").css("width","100%"),typeaheadCmp}}}),global.true=exports}({},function(){return this}());