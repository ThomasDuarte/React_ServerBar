/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={2702:function(e,t,n){e.exports=function(){"use strict";function objectOrFunction(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function isFunction(e){return"function"==typeof e}var e=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=0,r=void 0,o=void 0,i=function asap(e,n){d[t]=e,d[t+1]=n,2===(t+=2)&&(o?o(flush):p())};function setScheduler(e){o=e}function setAsap(e){i=e}var s="undefined"!=typeof window?window:void 0,a=s||{},c=a.MutationObserver||a.WebKitMutationObserver,u="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){return void 0!==r?function(){r(flush)}:useSetTimeout()}function useMutationObserver(){var e=0,t=new c(flush),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function useMessageChannel(){var e=new MessageChannel;return e.port1.onmessage=flush,function(){return e.port2.postMessage(0)}}function useSetTimeout(){var e=setTimeout;return function(){return e(flush,1)}}var d=new Array(1e3);function flush(){for(var e=0;e<t;e+=2)(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0;t=0}function attemptVertx(){try{var e=Function("return this")().require("vertx");return r=e.runOnLoop||e.runOnContext,useVertxTimer()}catch(e){return useSetTimeout()}}var p=void 0;function then(e,t){var n=this,r=new this.constructor(noop);void 0===r[f]&&makePromise(r);var o=n._state;if(o){var s=arguments[o-1];i((function(){return invokeCallback(o,r,s,n._result)}))}else subscribe(n,r,e,t);return r}function resolve$1(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(noop);return resolve(n,e),n}p=u?useNextTick():c?useMutationObserver():l?useMessageChannel():void 0===s?attemptVertx():useSetTimeout();var f=Math.random().toString(36).substring(2);function noop(){}var h=void 0,m=1,g=2;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function tryThen(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function handleForeignThenable(e,t,n){i((function(e){var r=!1,o=tryThen(n,t,(function(n){r||(r=!0,t!==n?resolve(e,n):fulfill(e,n))}),(function(t){r||(r=!0,reject(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,reject(e,o))}),e)}function handleOwnThenable(e,t){t._state===m?fulfill(e,t._result):t._state===g?reject(e,t._result):subscribe(t,void 0,(function(t){return resolve(e,t)}),(function(t){return reject(e,t)}))}function handleMaybeThenable(e,t,n){t.constructor===e.constructor&&n===then&&t.constructor.resolve===resolve$1?handleOwnThenable(e,t):void 0===n?fulfill(e,t):isFunction(n)?handleForeignThenable(e,t,n):fulfill(e,t)}function resolve(e,t){if(e===t)reject(e,selfFulfillment());else if(objectOrFunction(t)){var n=void 0;try{n=t.then}catch(t){return void reject(e,t)}handleMaybeThenable(e,t,n)}else fulfill(e,t)}function publishRejection(e){e._onerror&&e._onerror(e._result),publish(e)}function fulfill(e,t){e._state===h&&(e._result=t,e._state=m,0!==e._subscribers.length&&i(publish,e))}function reject(e,t){e._state===h&&(e._state=g,e._result=t,i(publishRejection,e))}function subscribe(e,t,n,r){var o=e._subscribers,s=o.length;e._onerror=null,o[s]=t,o[s+m]=n,o[s+g]=r,0===s&&e._state&&i(publish,e)}function publish(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?invokeCallback(n,r,o,i):o(i);e._subscribers.length=0}}function invokeCallback(e,t,n,r){var o=isFunction(n),i=void 0,s=void 0,a=!0;if(o){try{i=n(r)}catch(e){a=!1,s=e}if(t===i)return void reject(t,cannotReturnOwn())}else i=r;t._state!==h||(o&&a?resolve(t,i):!1===a?reject(t,s):e===m?fulfill(t,i):e===g&&reject(t,i))}function initializePromise(e,t){try{t((function resolvePromise(t){resolve(e,t)}),(function rejectPromise(t){reject(e,t)}))}catch(t){reject(e,t)}}var y=0;function nextId(){return y++}function makePromise(e){e[f]=y++,e._state=void 0,e._result=void 0,e._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}var v=function(){function Enumerator(t,n){this._instanceConstructor=t,this.promise=new t(noop),this.promise[f]||makePromise(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}return Enumerator.prototype._enumerate=function _enumerate(e){for(var t=0;this._state===h&&t<e.length;t++)this._eachEntry(e[t],t)},Enumerator.prototype._eachEntry=function _eachEntry(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===resolve$1){var o=void 0,i=void 0,s=!1;try{o=e.then}catch(e){s=!0,i=e}if(o===then&&e._state!==h)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===_){var a=new n(noop);s?reject(a,i):handleMaybeThenable(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},Enumerator.prototype._settledAt=function _settledAt(e,t,n){var r=this.promise;r._state===h&&(this._remaining--,e===g?reject(r,n):this._result[t]=n),0===this._remaining&&fulfill(r,this._result)},Enumerator.prototype._willSettleAt=function _willSettleAt(e,t){var n=this;subscribe(e,void 0,(function(e){return n._settledAt(m,t,e)}),(function(e){return n._settledAt(g,t,e)}))},Enumerator}();function all(e){return new v(this,e).promise}function race(t){var n=this;return e(t)?new n((function(e,r){for(var o=t.length,i=0;i<o;i++)n.resolve(t[i]).then(e,r)})):new n((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function reject$1(e){var t=new this(noop);return reject(t,e),t}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var _=function(){function Promise(e){this[f]=nextId(),this._result=this._state=void 0,this._subscribers=[],noop!==e&&("function"!=typeof e&&needsResolver(),this instanceof Promise?initializePromise(this,e):needsNew())}return Promise.prototype.catch=function _catch(e){return this.then(null,e)},Promise.prototype.finally=function _finally(e){var t=this,n=t.constructor;return isFunction(e)?t.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):t.then(e,e)},Promise}();function polyfill(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=_}return _.prototype.then=then,_.all=all,_.race=race,_.resolve=resolve$1,_.reject=reject$1,_._setScheduler=setScheduler,_._setAsap=setAsap,_._asap=i,_.polyfill=polyfill,_.Promise=_,_}()},4139:function(e){e.exports=function(){"use strict";function isPositiveInteger(e){return Number.isInteger(e)&&e>=0}function ArgumentError(e){this.name="ArgumentError",this.message=e}return function(e,t){if(t=t||{},"function"!=typeof e)throw new ArgumentError("fetch must be a function");if("object"!=typeof t)throw new ArgumentError("defaults must be an object");if(void 0!==t.retries&&!isPositiveInteger(t.retries))throw new ArgumentError("retries must be a positive integer");if(void 0!==t.retryDelay&&!isPositiveInteger(t.retryDelay)&&"function"!=typeof t.retryDelay)throw new ArgumentError("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==t.retryOn&&!Array.isArray(t.retryOn)&&"function"!=typeof t.retryOn)throw new ArgumentError("retryOn property expects an array or function");var n={retries:3,retryDelay:1e3,retryOn:[]};return t=Object.assign(n,t),function fetchRetry(n,r){var o=t.retries,i=t.retryDelay,s=t.retryOn;if(r&&void 0!==r.retries){if(!isPositiveInteger(r.retries))throw new ArgumentError("retries must be a positive integer");o=r.retries}if(r&&void 0!==r.retryDelay){if(!isPositiveInteger(r.retryDelay)&&"function"!=typeof r.retryDelay)throw new ArgumentError("retryDelay must be a positive integer or a function returning a positive integer");i=r.retryDelay}if(r&&r.retryOn){if(!Array.isArray(r.retryOn)&&"function"!=typeof r.retryOn)throw new ArgumentError("retryOn property expects an array or function");s=r.retryOn}return new Promise((function(t,a){var wrappedFetch=function(i){var c="undefined"!=typeof Request&&n instanceof Request?n.clone():n;e(c,r).then((function(e){if(Array.isArray(s)&&-1===s.indexOf(e.status))t(e);else if("function"==typeof s)try{return Promise.resolve(s(i,null,e)).then((function(n){n?retry(i,null,e):t(e)})).catch(a)}catch(e){a(e)}else i<o?retry(i,null,e):t(e)})).catch((function(e){if("function"==typeof s)try{Promise.resolve(s(i,e,null)).then((function(t){t?retry(i,e,null):a(e)})).catch((function(e){a(e)}))}catch(e){a(e)}else i<o?retry(i,e,null):a(e)}))};function retry(e,t,n){var r="function"==typeof i?i(e,t,n):i;setTimeout((function(){wrappedFetch(++e)}),r)}wrappedFetch(0)}))}}}()},4301:(e,t,n)=>{n(7147),e.exports=self.fetch.bind(self)},7147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DOMException:()=>u,Headers:()=>Headers,Request:()=>Request,Response:()=>Response,fetch:()=>fetch});var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g||{},o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(o.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function Headers(e){this.map={},e instanceof Headers?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function consumed(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function fileReaderReady(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function readBlobAsArrayBuffer(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsArrayBuffer(e),n}function bufferClone(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o.arrayBuffer&&o.blob&&function isDataView(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=bufferClone(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=bufferClone(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=consumed(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(o.blob)return this.blob().then(readBlobAsArrayBuffer);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return function readBlobAsText(e){var t=new FileReader,n=fileReaderReady(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8";return t.readAsText(e,o),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Headers.prototype.delete=function(e){delete this.map[normalizeName(e)]},Headers.prototype.get=function(e){return e=normalizeName(e),this.has(e)?this.map[e]:null},Headers.prototype.has=function(e){return this.map.hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){this.map[normalizeName(e)]=normalizeValue(t)},Headers.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Headers.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),iteratorFor(e)},Headers.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),iteratorFor(e)},Headers.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),iteratorFor(e)},o.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var a=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Request(e,t){if(!(this instanceof Request))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Headers(t.headers)),this.method=function normalizeMethod(e){var t=e.toUpperCase();return a.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function decode(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function Response(e,t){if(!(this instanceof Response))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var c=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===c.indexOf(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})};var u=r.DOMException;try{new u}catch(e){(u=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),u.prototype.constructor=u}function fetch(e,t){return new Promise((function(n,i){var s=new Request(e,t);if(s.signal&&s.signal.aborted)return i(new u("Aborted","AbortError"));var a=new XMLHttpRequest;function abortXhr(){a.abort()}if(a.onload=function(){var e,t,r={statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Headers,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(e){console.warn("Response "+e.message)}}})),t)};0===s.url.indexOf("file://")&&(a.status<200||a.status>599)?r.status=200:r.status=a.status,r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){n(new Response(o,r))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},a.onabort=function(){setTimeout((function(){i(new u("Aborted","AbortError"))}),0)},a.open(s.method,function fixUrl(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(s.url),!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&(o.blob?a.responseType="blob":o.arrayBuffer&&(a.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof Headers||r.Headers&&t.headers instanceof r.Headers)){var c=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){c.push(normalizeName(e)),a.setRequestHeader(e,normalizeValue(t.headers[e]))})),s.headers.forEach((function(e,t){-1===c.indexOf(t)&&a.setRequestHeader(t,e)}))}else s.headers.forEach((function(e,t){a.setRequestHeader(t,e)}));s.signal&&(s.signal.addEventListener("abort",abortXhr),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",abortXhr)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}fetch.polyfill=!0,r.fetch||(r.fetch=fetch,r.Headers=Headers,r.Request=Request,r.Response=Response)},509:(e,t,n)=>{"use strict";var r=n(9985),o=n(3691),i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not a function")}},2655:(e,t,n)=>{"use strict";var r=n(9429),o=n(3691),i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not a constructor")}},3550:(e,t,n)=>{"use strict";var r=n(598),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},7370:(e,t,n)=>{"use strict";var r=n(4201),o=n(5391),i=n(2560).f,s=r("unscopables"),a=Array.prototype;void 0===a[s]&&i(a,s,{configurable:!0,value:o(null)}),e.exports=function(e){a[s][e]=!0}},1514:(e,t,n)=>{"use strict";var r=n(730).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},767:(e,t,n)=>{"use strict";var r=n(3622),o=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw new o("Incorrect invocation")}},5027:(e,t,n)=>{"use strict";var r=n(8999),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not an object")}},4328:(e,t,n)=>{"use strict";var r=n(5290),o=n(7578),i=n(6310),createMethod=function(e){return function(t,n,s){var a,c=r(t),u=i(c),l=o(s,u);if(e&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},1969:(e,t,n)=>{"use strict";var r=n(4071),o=n(4413),i=n(690),s=n(6310),createMethod=function(e){var t=1===e;return function(n,a,c){for(var u,l=i(n),d=o(l),p=s(d),f=r(a,c);p-- >0;)if(f(u=d[p],p,l))switch(e){case 0:return u;case 1:return p}return t?-1:void 0}};e.exports={findLast:createMethod(0),findLastIndex:createMethod(1)}},6004:(e,t,n)=>{"use strict";var r=n(8844);e.exports=r([].slice)},6431:(e,t,n)=>{"use strict";var r=n(4201)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},6648:(e,t,n)=>{"use strict";var r=n(8844),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},926:(e,t,n)=>{"use strict";var r=n(3043),o=n(9985),i=n(6648),s=n(4201)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?n:c?i(t):"Object"===(r=i(t))&&o(t.callee)?"Arguments":r}},8758:(e,t,n)=>{"use strict";var r=n(6812),o=n(9152),i=n(2474),s=n(2560);e.exports=function(e,t,n){for(var a=o(t),c=s.f,u=i.f,l=0;l<a.length;l++){var d=a[l];r(e,d)||n&&r(n,d)||c(e,d,u(t,d))}}},5773:(e,t,n)=>{"use strict";var r=n(7697),o=n(2560),i=n(5684);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},5684:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2148:(e,t,n)=>{"use strict";var r=n(8702),o=n(2560);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),o.f(e,t,n)}},1880:(e,t,n)=>{"use strict";var r=n(9985),o=n(2560),i=n(8702),s=n(5014);e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(r(n)&&i(n,u,a),a.global)c?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},5014:(e,t,n)=>{"use strict";var r=n(9037),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},7697:(e,t,n)=>{"use strict";var r=n(3689);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6420:(e,t,n)=>{"use strict";var r=n(9037),o=n(8999),i=r.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},2532:(e,t,n)=>{"use strict";var r=n(8563),o=n(806);e.exports=!r&&!o&&"object"==typeof window&&"object"==typeof document},8563:e=>{"use strict";e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},3221:(e,t,n)=>{"use strict";var r=n(71);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},4764:(e,t,n)=>{"use strict";var r=n(71);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},806:(e,t,n)=>{"use strict";var r=n(9037),o=n(6648);e.exports="process"===o(r.process)},7486:(e,t,n)=>{"use strict";var r=n(71);e.exports=/web0s(?!.*chrome)/i.test(r)},71:e=>{"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3615:(e,t,n)=>{"use strict";var r,o,i=n(9037),s=n(71),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},2739:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6610:(e,t,n)=>{"use strict";var r=n(8844),o=Error,i=r("".replace),s=String(new o("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=i(e,a,"");return e}},5411:(e,t,n)=>{"use strict";var r=n(5773),o=n(6610),i=n(9599),s=Error.captureStackTrace;e.exports=function(e,t,n,a){i&&(s?s(e,t):r(e,"stack",o(n,a)))}},9599:(e,t,n)=>{"use strict";var r=n(3689),o=n(5684);e.exports=!r((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},9989:(e,t,n)=>{"use strict";var r=n(9037),o=n(2474).f,i=n(5773),s=n(1880),a=n(5014),c=n(8758),u=n(5266);e.exports=function(e,t){var n,l,d,p,f,h=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[h]||a(h,{}):r[h]&&r[h].prototype)for(l in t){if(p=t[l],d=e.dontCallGetSet?(f=o(n,l))&&f.value:n[l],!u(m?l:h+(g?".":"#")+l,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(e.sham||d&&d.sham)&&i(p,"sham",!0),s(n,l,p,e)}}},3689:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},8678:(e,t,n)=>{"use strict";n(4043);var r=n(2615),o=n(1880),i=n(6308),s=n(3689),a=n(4201),c=n(5773),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,n,d){var p=a(e),f=!s((function(){var t={};return t[p]=function(){return 7},7!==""[e](t)})),h=f&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!f||!h||n){var m=/./[p],g=t(p,""[e],(function(e,t,n,o,s){var a=t.exec;return a===i||a===l.exec?f&&!s?{done:!0,value:r(m,t,n,o)}:{done:!0,value:r(e,n,t,o)}:{done:!1}}));o(String.prototype,e,g[0]),o(l,p,g[1])}d&&c(l[p],"sham",!0)}},1735:(e,t,n)=>{"use strict";var r=n(7215),o=Function.prototype,i=o.apply,s=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(i):function(){return s.apply(i,arguments)})},4071:(e,t,n)=>{"use strict";var r=n(6576),o=n(509),i=n(7215),s=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},7215:(e,t,n)=>{"use strict";var r=n(3689);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},2615:(e,t,n)=>{"use strict";var r=n(7215),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},1236:(e,t,n)=>{"use strict";var r=n(7697),o=n(6812),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function something(){}.name,u=a&&(!r||r&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},2743:(e,t,n)=>{"use strict";var r=n(8844),o=n(509);e.exports=function(e,t,n){try{return r(o(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},6576:(e,t,n)=>{"use strict";var r=n(6648),o=n(8844);e.exports=function(e){if("Function"===r(e))return o(e)}},8844:(e,t,n)=>{"use strict";var r=n(7215),o=Function.prototype,i=o.call,s=r&&o.bind.bind(i,i);e.exports=r?s:function(e){return function(){return i.apply(e,arguments)}}},6058:(e,t,n)=>{"use strict";var r=n(9037),o=n(9985);e.exports=function(e,t){return arguments.length<2?(n=r[e],o(n)?n:void 0):r[e]&&r[e][t];var n}},1664:(e,t,n)=>{"use strict";var r=n(926),o=n(4849),i=n(981),s=n(9478),a=n(4201)("iterator");e.exports=function(e){if(!i(e))return o(e,a)||o(e,"@@iterator")||s[r(e)]}},5185:(e,t,n)=>{"use strict";var r=n(2615),o=n(509),i=n(5027),s=n(3691),a=n(1664),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(o(n))return i(r(n,e));throw new c(s(e)+" is not iterable")}},2643:(e,t,n)=>{"use strict";var r=n(8844),o=n(2297),i=n(9985),s=n(6648),a=n(4327),c=r([].push);e.exports=function(e){if(i(e))return e;if(o(e)){for(var t=e.length,n=[],r=0;r<t;r++){var u=e[r];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!==s(u)&&"String"!==s(u)||c(n,a(u))}var l=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(o(this))return t;for(var r=0;r<l;r++)if(n[r]===e)return t}}}},4849:(e,t,n)=>{"use strict";var r=n(509),o=n(981);e.exports=function(e,t){var n=e[t];return o(n)?void 0:r(n)}},7017:(e,t,n)=>{"use strict";var r=n(8844),o=n(690),i=Math.floor,s=r("".charAt),a=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,p){var f=n+e.length,h=r.length,m=l;return void 0!==d&&(d=o(d),m=u),a(p,m,(function(o,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,f);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return o;if(l>h){var p=i(l/10);return 0===p?o:p<=h?void 0===r[p-1]?s(a,1):r[p-1]+s(a,1):o}u=r[l-1]}return void 0===u?"":u}))}},9037:function(e,t,n){"use strict";var check=function(e){return e&&e.Math===Math&&e};e.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof n.g&&n.g)||check("object"==typeof this&&this)||function(){return this}()||Function("return this")()},6812:(e,t,n)=>{"use strict";var r=n(8844),o=n(690),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function hasOwn(e,t){return i(o(e),t)}},7248:e=>{"use strict";e.exports={}},920:e=>{"use strict";e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},2688:(e,t,n)=>{"use strict";var r=n(6058);e.exports=r("document","documentElement")},8506:(e,t,n)=>{"use strict";var r=n(7697),o=n(3689),i=n(6420);e.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},4413:(e,t,n)=>{"use strict";var r=n(8844),o=n(3689),i=n(6648),s=Object,a=r("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?a(e,""):s(e)}:s},3457:(e,t,n)=>{"use strict";var r=n(9985),o=n(8999),i=n(9385);e.exports=function(e,t,n){var s,a;return i&&r(s=t.constructor)&&s!==n&&o(a=s.prototype)&&a!==n.prototype&&i(e,a),e}},6738:(e,t,n)=>{"use strict";var r=n(8844),o=n(9985),i=n(4091),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},2570:(e,t,n)=>{"use strict";var r=n(8999),o=n(5773);e.exports=function(e,t){r(t)&&"cause"in t&&o(e,"cause",t.cause)}},618:(e,t,n)=>{"use strict";var r,o,i,s=n(9834),a=n(9037),c=n(8999),u=n(5773),l=n(6812),d=n(4091),p=n(2713),f=n(7248),h="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||d.state){var y=d.state||(d.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,r=function(e,t){if(y.has(e))throw new m(h);return t.facade=e,y.set(e,t),t},o=function(e){return y.get(e)||{}},i=function(e){return y.has(e)}}else{var v=p("state");f[v]=!0,r=function(e,t){if(l(e,v))throw new m(h);return t.facade=e,u(e,v,t),t},o=function(e){return l(e,v)?e[v]:{}},i=function(e){return l(e,v)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}}}},3292:(e,t,n)=>{"use strict";var r=n(4201),o=n(9478),i=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},2297:(e,t,n)=>{"use strict";var r=n(6648);e.exports=Array.isArray||function isArray(e){return"Array"===r(e)}},9985:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},9429:(e,t,n)=>{"use strict";var r=n(8844),o=n(3689),i=n(9985),s=n(926),a=n(6058),c=n(6738),noop=function(){},u=a("Reflect","construct"),l=/^\s*(?:class|function)\b/,d=r(l.exec),p=!l.test(noop),f=function isConstructor(e){if(!i(e))return!1;try{return u(noop,[],e),!0}catch(e){return!1}},h=function isConstructor(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(l,c(e))}catch(e){return!0}};h.sham=!0,e.exports=!u||o((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?h:f},5266:(e,t,n)=>{"use strict";var r=n(3689),o=n(9985),i=/#|\.prototype\./,isForced=function(e,t){var n=a[s(e)];return n===u||n!==c&&(o(t)?r(t):!!t)},s=isForced.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=isForced.data={},c=isForced.NATIVE="N",u=isForced.POLYFILL="P";e.exports=isForced},981:e=>{"use strict";e.exports=function(e){return null==e}},8999:(e,t,n)=>{"use strict";var r=n(9985);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},598:(e,t,n)=>{"use strict";var r=n(8999);e.exports=function(e){return r(e)||null===e}},3931:e=>{"use strict";e.exports=!1},1245:(e,t,n)=>{"use strict";var r=n(8999),o=n(6648),i=n(4201)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===o(e))}},734:(e,t,n)=>{"use strict";var r=n(6058),o=n(9985),i=n(3622),s=n(9525),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&i(t.prototype,a(e))}},8734:(e,t,n)=>{"use strict";var r=n(4071),o=n(2615),i=n(5027),s=n(3691),a=n(3292),c=n(6310),u=n(3622),l=n(5185),d=n(1664),p=n(2125),f=TypeError,Result=function(e,t){this.stopped=e,this.result=t},h=Result.prototype;e.exports=function(e,t,n){var m,g,y,v,_,E,b,S=n&&n.that,w=!(!n||!n.AS_ENTRIES),x=!(!n||!n.IS_RECORD),T=!(!n||!n.IS_ITERATOR),O=!(!n||!n.INTERRUPTED),k=r(t,S),stop=function(e){return m&&p(m,"normal",e),new Result(!0,e)},callFn=function(e){return w?(i(e),O?k(e[0],e[1],stop):k(e[0],e[1])):O?k(e,stop):k(e)};if(x)m=e.iterator;else if(T)m=e;else{if(!(g=d(e)))throw new f(s(e)+" is not iterable");if(a(g)){for(y=0,v=c(e);v>y;y++)if((_=callFn(e[y]))&&u(h,_))return _;return new Result(!1)}m=l(e,g)}for(E=x?e.next:m.next;!(b=o(E,m)).done;){try{_=callFn(b.value)}catch(e){p(m,"throw",e)}if("object"==typeof _&&_&&u(h,_))return _}return new Result(!1)}},2125:(e,t,n)=>{"use strict";var r=n(2615),o=n(5027),i=n(4849);e.exports=function(e,t,n){var s,a;o(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw n;return n}s=r(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw n;if(a)throw s;return o(s),n}},9478:e=>{"use strict";e.exports={}},6310:(e,t,n)=>{"use strict";var r=n(3126);e.exports=function(e){return r(e.length)}},8702:(e,t,n)=>{"use strict";var r=n(8844),o=n(3689),i=n(9985),s=n(6812),a=n(7697),c=n(1236).CONFIGURABLE,u=n(6738),l=n(618),d=l.enforce,p=l.get,f=String,h=Object.defineProperty,m=r("".slice),g=r("".replace),y=r([].join),v=a&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),_=String(String).split("String"),E=e.exports=function(e,t,n){"Symbol("===m(f(t),0,7)&&(t="["+g(f(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?h(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&s(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return s(r,"source")||(r.source=y(_,"string"==typeof t?t:"")),e};Function.prototype.toString=E((function toString(){return i(this)&&p(this).source||u(this)}),"toString")},8828:e=>{"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function trunc(e){var r=+e;return(r>0?n:t)(r)}},231:(e,t,n)=>{"use strict";var r,o,i,s,a,c=n(9037),u=n(517),l=n(4071),d=n(9886).set,p=n(4410),f=n(4764),h=n(3221),m=n(7486),g=n(806),y=c.MutationObserver||c.WebKitMutationObserver,v=c.document,_=c.process,E=c.Promise,b=u("queueMicrotask");if(!b){var S=new p,flush=function(){var e,t;for(g&&(e=_.domain)&&e.exit();t=S.get();)try{t()}catch(e){throw S.head&&r(),e}e&&e.enter()};f||g||m||!y||!v?!h&&E&&E.resolve?((s=E.resolve(void 0)).constructor=E,a=l(s.then,s),r=function(){a(flush)}):g?r=function(){_.nextTick(flush)}:(d=l(d,c),r=function(){d(flush)}):(o=!0,i=v.createTextNode(""),new y(flush).observe(i,{characterData:!0}),r=function(){i.data=o=!o}),b=function(e){S.head||r(),S.add(e)}}e.exports=b},8742:(e,t,n)=>{"use strict";var r=n(509),o=TypeError,PromiseCapability=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new o("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new PromiseCapability(e)}},3841:(e,t,n)=>{"use strict";var r=n(4327);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},5391:(e,t,n)=>{"use strict";var r,o=n(5027),i=n(8920),s=n(2739),a=n(7248),c=n(2688),u=n(6420),l=n(2713),d="prototype",p="script",f=l("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return"<"+p+">"+e+"</"+p+">"},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObject=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;NullProtoObject="undefined"!=typeof document?document.domain&&r?NullProtoObjectViaActiveX(r):(t=u("iframe"),n="java"+p+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F):NullProtoObjectViaActiveX(r);for(var o=s.length;o--;)delete NullProtoObject[d][s[o]];return NullProtoObject()};a[f]=!0,e.exports=Object.create||function create(e,t){var n;return null!==e?(EmptyConstructor[d]=o(e),n=new EmptyConstructor,EmptyConstructor[d]=null,n[f]=e):n=NullProtoObject(),void 0===t?n:i.f(n,t)}},8920:(e,t,n)=>{"use strict";var r=n(7697),o=n(5648),i=n(2560),s=n(5027),a=n(5290),c=n(300);t.f=r&&!o?Object.defineProperties:function defineProperties(e,t){s(e);for(var n,r=a(t),o=c(t),u=o.length,l=0;u>l;)i.f(e,n=o[l++],r[n]);return e}},2560:(e,t,n)=>{"use strict";var r=n(7697),o=n(8506),i=n(5648),s=n(5027),a=n(8360),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";t.f=r?i?function defineProperty(e,t,n){if(s(e),t=a(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=l(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:d in n?n[d]:r[d],writable:!1})}return u(e,t,n)}:u:function defineProperty(e,t,n){if(s(e),t=a(t),s(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},2474:(e,t,n)=>{"use strict";var r=n(7697),o=n(2615),i=n(9556),s=n(5684),a=n(5290),c=n(8360),u=n(6812),l=n(8506),d=Object.getOwnPropertyDescriptor;t.f=r?d:function getOwnPropertyDescriptor(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!o(i.f,e,t),e[t])}},2741:(e,t,n)=>{"use strict";var r=n(4948),o=n(2739).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return r(e,o)}},7518:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},3622:(e,t,n)=>{"use strict";var r=n(8844);e.exports=r({}.isPrototypeOf)},4948:(e,t,n)=>{"use strict";var r=n(8844),o=n(6812),i=n(5290),s=n(4328).indexOf,a=n(7248),c=r([].push);e.exports=function(e,t){var n,r=i(e),u=0,l=[];for(n in r)!o(a,n)&&o(r,n)&&c(l,n);for(;t.length>u;)o(r,n=t[u++])&&(~s(l,n)||c(l,n));return l}},300:(e,t,n)=>{"use strict";var r=n(4948),o=n(2739);e.exports=Object.keys||function keys(e){return r(e,o)}},9556:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function propertyIsEnumerable(e){var t=r(this,e);return!!t&&t.enumerable}:n},9385:(e,t,n)=>{"use strict";var r=n(2743),o=n(5027),i=n(3550);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function setPrototypeOf(n,r){return o(n),i(r),t?e(n,r):n.__proto__=r,n}}():void 0)},5899:(e,t,n)=>{"use strict";var r=n(2615),o=n(9985),i=n(8999),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&o(n=e.toString)&&!i(a=r(n,e)))return a;if(o(n=e.valueOf)&&!i(a=r(n,e)))return a;if("string"!==t&&o(n=e.toString)&&!i(a=r(n,e)))return a;throw new s("Can't convert object to primitive value")}},9152:(e,t,n)=>{"use strict";var r=n(6058),o=n(8844),i=n(2741),s=n(7518),a=n(5027),c=o([].concat);e.exports=r("Reflect","ownKeys")||function ownKeys(e){var t=i.f(a(e)),n=s.f;return n?c(t,n(e)):t}},9302:e=>{"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},7073:(e,t,n)=>{"use strict";var r=n(9037),o=n(7919),i=n(9985),s=n(5266),a=n(6738),c=n(4201),u=n(2532),l=n(8563),d=n(3931),p=n(3615),f=o&&o.prototype,h=c("species"),m=!1,g=i(r.PromiseRejectionEvent),y=s("Promise",(function(){var e=a(o),t=e!==String(o);if(!t&&66===p)return!0;if(d&&(!f.catch||!f.finally))return!0;if(!p||p<51||!/native code/.test(e)){var n=new o((function(e){e(1)})),FakePromise=function(e){e((function(){}),(function(){}))};if((n.constructor={})[h]=FakePromise,!(m=n.then((function(){}))instanceof FakePromise))return!0}return!t&&(u||l)&&!g}));e.exports={CONSTRUCTOR:y,REJECTION_EVENT:g,SUBCLASSING:m}},7919:(e,t,n)=>{"use strict";var r=n(9037);e.exports=r.Promise},2945:(e,t,n)=>{"use strict";var r=n(5027),o=n(8999),i=n(8742);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},562:(e,t,n)=>{"use strict";var r=n(7919),o=n(6431),i=n(7073).CONSTRUCTOR;e.exports=i||!o((function(e){r.all(e).then(void 0,(function(){}))}))},8055:(e,t,n)=>{"use strict";var r=n(2560).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},4410:e=>{"use strict";var Queue=function(){this.head=null,this.tail=null};Queue.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=Queue},6100:(e,t,n)=>{"use strict";var r=n(2615),o=n(5027),i=n(9985),s=n(6648),a=n(6308),c=TypeError;e.exports=function(e,t){var n=e.exec;if(i(n)){var u=r(n,e,t);return null!==u&&o(u),u}if("RegExp"===s(e))return r(a,e,t);throw new c("RegExp#exec called on incompatible receiver")}},6308:(e,t,n)=>{"use strict";var r,o,i=n(2615),s=n(8844),a=n(4327),c=n(9633),u=n(7901),l=n(3430),d=n(5391),p=n(618).get,f=n(2100),h=n(6422),m=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,v=s("".charAt),_=s("".indexOf),E=s("".replace),b=s("".slice),S=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),w=u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(S||x||w||f||h)&&(y=function exec(e){var t,n,r,o,s,u,l,f=this,h=p(f),T=a(e),O=h.raw;if(O)return O.lastIndex=f.lastIndex,t=i(y,O,T),f.lastIndex=O.lastIndex,t;var k=h.groups,I=w&&f.sticky,A=i(c,f),C=f.source,D=0,R=T;if(I&&(A=E(A,"y",""),-1===_(A,"g")&&(A+="g"),R=b(T,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==v(T,f.lastIndex-1))&&(C="(?: "+C+")",R=" "+R,D++),n=new RegExp("^(?:"+C+")",A)),x&&(n=new RegExp("^"+C+"$(?!\\s)",A)),S&&(r=f.lastIndex),o=i(g,I?n:f,R),I?o?(o.input=b(o.input,D),o[0]=b(o[0],D),o.index=f.lastIndex,f.lastIndex+=o[0].length):f.lastIndex=0:S&&o&&(f.lastIndex=f.global?o.index+o[0].length:r),x&&o&&o.length>1&&i(m,o[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o&&k)for(o.groups=u=d(null),s=0;s<k.length;s++)u[(l=k[s])[0]]=o[l[1]];return o}),e.exports=y},9633:(e,t,n)=>{"use strict";var r=n(5027);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3477:(e,t,n)=>{"use strict";var r=n(2615),o=n(6812),i=n(3622),s=n(9633),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||o(e,"flags")||!i(a,e)?t:r(s,e)}},7901:(e,t,n)=>{"use strict";var r=n(3689),o=n(9037).RegExp,i=r((function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=i||r((function(){return!o("a","y").sticky})),a=i||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},2100:(e,t,n)=>{"use strict";var r=n(3689),o=n(9037).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},6422:(e,t,n)=>{"use strict";var r=n(3689),o=n(9037).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4684:(e,t,n)=>{"use strict";var r=n(981),o=TypeError;e.exports=function(e){if(r(e))throw new o("Can't call method on "+e);return e}},517:(e,t,n)=>{"use strict";var r=n(9037),o=n(7697),i=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!o)return r[e];var t=i(r,e);return t&&t.value}},4241:(e,t,n)=>{"use strict";var r=n(6058),o=n(2148),i=n(4201),s=n(7697),a=i("species");e.exports=function(e){var t=r(e);s&&t&&!t[a]&&o(t,a,{configurable:!0,get:function(){return this}})}},5997:(e,t,n)=>{"use strict";var r=n(2560).f,o=n(6812),i=n(4201)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!o(e,i)&&r(e,i,{configurable:!0,value:t})}},2713:(e,t,n)=>{"use strict";var r=n(3430),o=n(4630),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},4091:(e,t,n)=>{"use strict";var r=n(9037),o=n(5014),i="__core-js_shared__",s=r[i]||o(i,{});e.exports=s},3430:(e,t,n)=>{"use strict";var r=n(3931),o=n(4091);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.35.1",mode:r?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.35.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6373:(e,t,n)=>{"use strict";var r=n(5027),o=n(2655),i=n(981),s=n(4201)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||i(n=r(a)[s])?t:o(n)}},730:(e,t,n)=>{"use strict";var r=n(8844),o=n(8700),i=n(4327),s=n(4684),a=r("".charAt),c=r("".charCodeAt),u=r("".slice),createMethod=function(e){return function(t,n){var r,l,d=i(s(t)),p=o(n),f=d.length;return p<0||p>=f?e?"":void 0:(r=c(d,p))<55296||r>56319||p+1===f||(l=c(d,p+1))<56320||l>57343?e?a(d,p):r:e?u(d,p,p+2):l-56320+(r-55296<<10)+65536}};e.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},146:(e,t,n)=>{"use strict";var r=n(3615),o=n(3689),i=n(9037).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},9886:(e,t,n)=>{"use strict";var r,o,i,s,a=n(9037),c=n(1735),u=n(4071),l=n(9985),d=n(6812),p=n(3689),f=n(2688),h=n(6004),m=n(6420),g=n(1500),y=n(4764),v=n(806),_=a.setImmediate,E=a.clearImmediate,b=a.process,S=a.Dispatch,w=a.Function,x=a.MessageChannel,T=a.String,O=0,k={},I="onreadystatechange";p((function(){r=a.location}));var run=function(e){if(d(k,e)){var t=k[e];delete k[e],t()}},runner=function(e){return function(){run(e)}},eventListener=function(e){run(e.data)},globalPostMessageDefer=function(e){a.postMessage(T(e),r.protocol+"//"+r.host)};_&&E||(_=function setImmediate(e){g(arguments.length,1);var t=l(e)?e:w(e),n=h(arguments,1);return k[++O]=function(){c(t,void 0,n)},o(O),O},E=function clearImmediate(e){delete k[e]},v?o=function(e){b.nextTick(runner(e))}:S&&S.now?o=function(e){S.now(runner(e))}:x&&!y?(s=(i=new x).port2,i.port1.onmessage=eventListener,o=u(s.postMessage,s)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!p(globalPostMessageDefer)?(o=globalPostMessageDefer,a.addEventListener("message",eventListener,!1)):o=I in m("script")?function(e){f.appendChild(m("script"))[I]=function(){f.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}),e.exports={set:_,clear:E}},7578:(e,t,n)=>{"use strict";var r=n(8700),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},5290:(e,t,n)=>{"use strict";var r=n(4413),o=n(4684);e.exports=function(e){return r(o(e))}},8700:(e,t,n)=>{"use strict";var r=n(8828);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},3126:(e,t,n)=>{"use strict";var r=n(8700),o=Math.min;e.exports=function(e){var t=r(e);return t>0?o(t,9007199254740991):0}},690:(e,t,n)=>{"use strict";var r=n(4684),o=Object;e.exports=function(e){return o(r(e))}},8732:(e,t,n)=>{"use strict";var r=n(2615),o=n(8999),i=n(734),s=n(4849),a=n(5899),c=n(4201),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var n,c=s(e,l);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!o(n)||i(n))return n;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},8360:(e,t,n)=>{"use strict";var r=n(8732),o=n(734);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},3043:(e,t,n)=>{"use strict";var r={};r[n(4201)("toStringTag")]="z",e.exports="[object z]"===String(r)},4327:(e,t,n)=>{"use strict";var r=n(926),o=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},3691:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},4630:(e,t,n)=>{"use strict";var r=n(8844),o=0,i=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},9525:(e,t,n)=>{"use strict";var r=n(146);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5648:(e,t,n)=>{"use strict";var r=n(7697),o=n(3689);e.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1500:e=>{"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},9834:(e,t,n)=>{"use strict";var r=n(9037),o=n(9985),i=r.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},4201:(e,t,n)=>{"use strict";var r=n(9037),o=n(3430),i=n(6812),s=n(4630),a=n(146),c=n(9525),u=r.Symbol,l=o("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return i(l,e)||(l[e]=a&&i(u,e)?u[e]:d("Symbol."+e)),l[e]}},1064:(e,t,n)=>{"use strict";var r=n(6058),o=n(6812),i=n(5773),s=n(3622),a=n(9385),c=n(8758),u=n(8055),l=n(3457),d=n(3841),p=n(2570),f=n(5411),h=n(7697),m=n(3931);e.exports=function(e,t,n,g){var y="stackTraceLimit",v=g?2:1,_=e.split("."),E=_[_.length-1],b=r.apply(null,_);if(b){var S=b.prototype;if(!m&&o(S,"cause")&&delete S.cause,!n)return b;var w=r("Error"),x=t((function(e,t){var n=d(g?t:e,void 0),r=g?new b(e):new b;return void 0!==n&&i(r,"message",n),f(r,x,r.stack,2),this&&s(S,this)&&l(r,this,x),arguments.length>v&&p(r,arguments[v]),r}));if(x.prototype=S,"Error"!==E?a?a(x,w):c(x,w,{name:!0}):h&&y in b&&(u(x,b,y),u(x,b,"prepareStackTrace")),c(x,b),!m)try{S.name!==E&&i(S,"name",E),S.constructor=x}catch(e){}return x}}},3383:(e,t,n)=>{"use strict";var r=n(9989),o=n(1969).findLastIndex,i=n(7370);r({target:"Array",proto:!0},{findLastIndex:function findLastIndex(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLastIndex")},6801:(e,t,n)=>{"use strict";var r=n(9989),o=n(4328).includes,i=n(3689),s=n(7370);r({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function includes(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},1057:(e,t,n)=>{"use strict";var r=n(9989),o=n(9037),i=n(1735),s=n(1064),a="WebAssembly",c=o[a],u=7!==new Error("e",{cause:7}).cause,exportGlobalErrorCauseWrapper=function(e,t){var n={};n[e]=s(e,t,u),r({global:!0,constructor:!0,arity:1,forced:u},n)},exportWebAssemblyErrorCauseWrapper=function(e,t){if(c&&c[e]){var n={};n[e]=s(a+"."+e,t,u),r({target:a,stat:!0,constructor:!0,arity:1,forced:u},n)}};exportGlobalErrorCauseWrapper("Error",(function(e){return function Error(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("EvalError",(function(e){return function EvalError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("RangeError",(function(e){return function RangeError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("ReferenceError",(function(e){return function ReferenceError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("SyntaxError",(function(e){return function SyntaxError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("TypeError",(function(e){return function TypeError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("URIError",(function(e){return function URIError(t){return i(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("CompileError",(function(e){return function CompileError(t){return i(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("LinkError",(function(e){return function LinkError(t){return i(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("RuntimeError",(function(e){return function RuntimeError(t){return i(e,this,arguments)}}))},8324:(e,t,n)=>{"use strict";var r=n(9989),o=n(6058),i=n(1735),s=n(2615),a=n(8844),c=n(3689),u=n(9985),l=n(734),d=n(6004),p=n(2643),f=n(146),h=String,m=o("JSON","stringify"),g=a(/./.exec),y=a("".charAt),v=a("".charCodeAt),_=a("".replace),E=a(1..toString),b=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,x=!f||c((function(){var e=o("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))})),T=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),stringifyWithSymbolsFix=function(e,t){var n=d(arguments),r=p(t);if(u(r)||void 0!==e&&!l(e))return n[1]=function(e,t){if(u(r)&&(t=s(r,this,h(e),t)),!l(t))return t},i(m,null,n)},fixIllFormed=function(e,t,n){var r=y(n,t-1),o=y(n,t+1);return g(S,e)&&!g(w,o)||g(w,e)&&!g(S,r)?"\\u"+E(v(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:x||T},{stringify:function stringify(e,t,n){var r=d(arguments),o=i(x?stringifyWithSymbolsFix:m,null,r);return T&&"string"==typeof o?_(o,b,fixIllFormed):o}})},1692:(e,t,n)=>{"use strict";var r=n(9989),o=n(2615),i=n(509),s=n(8742),a=n(9302),c=n(8734);r({target:"Promise",stat:!0,forced:n(562)},{all:function all(e){var t=this,n=s.f(t),r=n.resolve,u=n.reject,l=a((function(){var n=i(t.resolve),s=[],a=0,l=1;c(e,(function(e){var i=a++,c=!1;l++,o(n,t,e).then((function(e){c||(c=!0,s[i]=e,--l||r(s))}),u)})),--l||r(s)}));return l.error&&u(l.value),n.promise}})},5089:(e,t,n)=>{"use strict";var r=n(9989),o=n(3931),i=n(7073).CONSTRUCTOR,s=n(7919),a=n(6058),c=n(9985),u=n(1880),l=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&c(s)){var d=a("Promise").prototype.catch;l.catch!==d&&u(l,"catch",d,{unsafe:!0})}},6697:(e,t,n)=>{"use strict";var r,o,i,s=n(9989),a=n(3931),c=n(806),u=n(9037),l=n(2615),d=n(1880),p=n(9385),f=n(5997),h=n(4241),m=n(509),g=n(9985),y=n(8999),v=n(767),_=n(6373),E=n(9886).set,b=n(231),S=n(920),w=n(9302),x=n(4410),T=n(618),O=n(7919),k=n(7073),I=n(8742),A="Promise",C=k.CONSTRUCTOR,D=k.REJECTION_EVENT,R=k.SUBCLASSING,U=T.getterFor(A),P=T.set,N=O&&O.prototype,F=O,M=N,j=u.TypeError,L=u.document,$=u.process,B=I.f,H=B,q=!!(L&&L.createEvent&&u.dispatchEvent),z="unhandledrejection",isThenable=function(e){var t;return!(!y(e)||!g(t=e.then))&&t},callReaction=function(e,t){var n,r,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{a?(s||(2===t.rejection&&onHandleUnhandled(t),t.rejection=1),!0===a?n=i:(d&&d.enter(),n=a(i),d&&(d.exit(),o=!0)),n===e.promise?u(new j("Promise-chain cycle")):(r=isThenable(n))?l(r,n,c,u):c(n)):u(i)}catch(e){d&&!o&&d.exit(),u(e)}},notify=function(e,t){e.notified||(e.notified=!0,b((function(){for(var n,r=e.reactions;n=r.get();)callReaction(n,e);e.notified=!1,t&&!e.rejection&&onUnhandled(e)})))},dispatchEvent=function(e,t,n){var r,o;q?((r=L.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!D&&(o=u["on"+e])?o(r):e===z&&S("Unhandled promise rejection",n)},onUnhandled=function(e){l(E,u,(function(){var t,n=e.facade,r=e.value;if(isUnhandled(e)&&(t=w((function(){c?$.emit("unhandledRejection",r,n):dispatchEvent(z,n,r)})),e.rejection=c||isUnhandled(e)?2:1,t.error))throw t.value}))},isUnhandled=function(e){return 1!==e.rejection&&!e.parent},onHandleUnhandled=function(e){l(E,u,(function(){var t=e.facade;c?$.emit("rejectionHandled",t):dispatchEvent("rejectionhandled",t,e.value)}))},bind=function(e,t,n){return function(r){e(t,r,n)}},internalReject=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,notify(e,!0))},internalResolve=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new j("Promise can't be resolved itself");var r=isThenable(t);r?b((function(){var n={done:!1};try{l(r,t,bind(internalResolve,n,e),bind(internalReject,n,e))}catch(t){internalReject(n,t,e)}})):(e.value=t,e.state=1,notify(e,!1))}catch(t){internalReject({done:!1},t,e)}}};if(C&&(M=(F=function Promise(e){v(this,M),m(e),l(r,this);var t=U(this);try{e(bind(internalResolve,t),bind(internalReject,t))}catch(e){internalReject(t,e)}}).prototype,(r=function Promise(e){P(this,{type:A,done:!1,notified:!1,parent:!1,reactions:new x,rejection:!1,state:0,value:void 0})}).prototype=d(M,"then",(function then(e,t){var n=U(this),r=B(_(this,F));return n.parent=!0,r.ok=!g(e)||e,r.fail=g(t)&&t,r.domain=c?$.domain:void 0,0===n.state?n.reactions.add(r):b((function(){callReaction(r,n)})),r.promise})),o=function(){var e=new r,t=U(e);this.promise=e,this.resolve=bind(internalResolve,t),this.reject=bind(internalReject,t)},I.f=B=function(e){return e===F||undefined===e?new o(e):H(e)},!a&&g(O)&&N!==Object.prototype)){i=N.then,R||d(N,"then",(function then(e,t){var n=this;return new F((function(e,t){l(i,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete N.constructor}catch(e){}p&&p(N,M)}s({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:F}),f(F,A,!1,!0),h(A)},3964:(e,t,n)=>{"use strict";n(6697),n(1692),n(5089),n(8829),n(2092),n(7905)},8829:(e,t,n)=>{"use strict";var r=n(9989),o=n(2615),i=n(509),s=n(8742),a=n(9302),c=n(8734);r({target:"Promise",stat:!0,forced:n(562)},{race:function race(e){var t=this,n=s.f(t),r=n.reject,u=a((function(){var s=i(t.resolve);c(e,(function(e){o(s,t,e).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},2092:(e,t,n)=>{"use strict";var r=n(9989),o=n(8742);r({target:"Promise",stat:!0,forced:n(7073).CONSTRUCTOR},{reject:function reject(e){var t=o.f(this);return(0,t.reject)(e),t.promise}})},7905:(e,t,n)=>{"use strict";var r=n(9989),o=n(6058),i=n(3931),s=n(7919),a=n(7073).CONSTRUCTOR,c=n(2945),u=o("Promise"),l=i&&!a;r({target:"Promise",stat:!0,forced:i||a},{resolve:function resolve(e){return c(l&&this===u?s:this,e)}})},2003:(e,t,n)=>{"use strict";var r=n(7697),o=n(9037),i=n(8844),s=n(5266),a=n(3457),c=n(5773),u=n(5391),l=n(2741).f,d=n(3622),p=n(1245),f=n(4327),h=n(3477),m=n(7901),g=n(8055),y=n(1880),v=n(3689),_=n(6812),E=n(618).enforce,b=n(4241),S=n(4201),w=n(2100),x=n(6422),T=S("match"),O=o.RegExp,k=O.prototype,I=o.SyntaxError,A=i(k.exec),C=i("".charAt),D=i("".replace),R=i("".indexOf),U=i("".slice),P=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,F=/a/g,M=new O(N)!==N,j=m.MISSED_STICKY,L=m.UNSUPPORTED_Y,$=r&&(!M||j||w||x||v((function(){return F[T]=!1,O(N)!==N||O(F)===F||"/a/i"!==String(O(N,"i"))})));if(s("RegExp",$)){for(var B=function RegExp(e,t){var n,r,o,i,s,l,m=d(k,this),g=p(e),y=void 0===t,v=[],b=e;if(!m&&g&&y&&e.constructor===B)return e;if((g||d(k,e))&&(e=e.source,y&&(t=h(b))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),b=e,w&&"dotAll"in N&&(r=!!t&&R(t,"s")>-1)&&(t=D(t,/s/g,"")),n=t,j&&"sticky"in N&&(o=!!t&&R(t,"y")>-1)&&L&&(t=D(t,/y/g,"")),x&&(i=function(e){for(var t,n=e.length,r=0,o="",i=[],s=u(null),a=!1,c=!1,l=0,d="";r<=n;r++){if("\\"===(t=C(e,r)))t+=C(e,++r);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:A(P,U(e,r+1))&&(r+=2,c=!0),o+=t,l++;continue;case">"===t&&c:if(""===d||_(s,d))throw new I("Invalid capture group name");s[d]=!0,i[i.length]=[d,l],c=!1,d="";continue}c?d+=t:o+=t}return[o,i]}(e),e=i[0],v=i[1]),s=a(O(e,t),m?this:k,B),(r||o||v.length)&&(l=E(s),r&&(l.dotAll=!0,l.raw=B(function(e){for(var t,n=e.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(t=C(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+C(e,++r);return o}(e),n)),o&&(l.sticky=!0),v.length&&(l.groups=v)),e!==b)try{c(s,"source",""===b?"(?:)":b)}catch(e){}return s},H=l(O),q=0;H.length>q;)g(B,O,H[q++]);k.constructor=B,B.prototype=k,y(o,"RegExp",B,{constructor:!0})}b("RegExp")},8518:(e,t,n)=>{"use strict";var r=n(7697),o=n(2100),i=n(6648),s=n(2148),a=n(618).get,c=RegExp.prototype,u=TypeError;r&&o&&s(c,"dotAll",{configurable:!0,get:function dotAll(){if(this!==c){if("RegExp"===i(this))return!!a(this).dotAll;throw new u("Incompatible receiver, RegExp required")}}})},4043:(e,t,n)=>{"use strict";var r=n(9989),o=n(6308);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},7267:(e,t,n)=>{"use strict";var r=n(1735),o=n(2615),i=n(8844),s=n(8678),a=n(3689),c=n(5027),u=n(9985),l=n(981),d=n(8700),p=n(3126),f=n(4327),h=n(4684),m=n(1514),g=n(4849),y=n(7017),v=n(6100),_=n(4201)("replace"),E=Math.max,b=Math.min,S=i([].concat),w=i([].push),x=i("".indexOf),T=i("".slice),O="$0"==="a".replace(/./,"$0"),k=!!/./[_]&&""===/./[_]("a","$0");s("replace",(function(e,t,n){var i=k?"$":"$0";return[function replace(e,n){var r=h(this),i=l(e)?void 0:g(e,_);return i?o(i,e,r,n):o(t,f(r),e,n)},function(e,o){var s=c(this),a=f(e);if("string"==typeof o&&-1===x(o,i)&&-1===x(o,"$<")){var l=n(t,s,a,o);if(l.done)return l.value}var h=u(o);h||(o=f(o));var g,_=s.global;_&&(g=s.unicode,s.lastIndex=0);for(var O,k=[];null!==(O=v(s,a))&&(w(k,O),_);){""===f(O[0])&&(s.lastIndex=m(a,p(s.lastIndex),g))}for(var I,A="",C=0,D=0;D<k.length;D++){for(var R,U=f((O=k[D])[0]),P=E(b(d(O.index),a.length),0),N=[],F=1;F<O.length;F++)w(N,void 0===(I=O[F])?I:String(I));var M=O.groups;if(h){var j=S([U],N,P,a);void 0!==M&&w(j,M),R=f(r(o,void 0,j))}else R=y(U,a,P,N,M,o);P>=C&&(A+=T(a,C,P)+R,C=P+U.length)}return A+T(a,C)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!O||k)},6544:(e,t,n)=>{"use strict";var r=n(9989),o=n(7697),i=n(9037),s=n(8844),a=n(6812),c=n(9985),u=n(3622),l=n(4327),d=n(2148),p=n(8758),f=i.Symbol,h=f&&f.prototype;if(o&&c(f)&&(!("description"in h)||void 0!==f().description)){var m={},g=function Symbol(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(h,this)?new f(e):void 0===e?f():f(e);return""===e&&(m[t]=!0),t};p(g,f),g.prototype=h,h.constructor=g;var y="Symbol(description detection)"===String(f("description detection")),v=s(h.valueOf),_=s(h.toString),E=/^Symbol\((.*)\)[^)]+$/,b=s("".replace),S=s("".slice);d(h,"description",{configurable:!0,get:function description(){var e=v(this);if(a(m,e))return"";var t=_(e),n=y?S(t,7,-1):b(t,E,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},3228:(e,t,n)=>{"use strict";var r=n(7697),o=n(8844),i=n(2148),s=URLSearchParams.prototype,a=o(s.forEach);r&&!("size"in s)&&i(s,"size",{get:function size(){var e=0;return a(this,(function(){e++})),e},configurable:!0,enumerable:!0})}},t={};function __webpack_require__(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";__webpack_require__(3964),__webpack_require__(6544),__webpack_require__(3383),__webpack_require__(6801),__webpack_require__(4043),__webpack_require__(7267),__webpack_require__(3228);const e=new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),t={API_ENV:"PROD",BROWSER:"CHROME",VERSION:"3.0.62",API_URL:"https://api-gateway",SITE_URL:"https://franceverif.fr",ONBOARDING_URL:"https://app",CLICK_STREAM_URL:"https://clickstream-data",ANALYTIC_URL:"https://datastat"},n="security",r="cashback",o=["priceComparison"],i="/promotion-target-user-email",s="/promotion-target-user-visit",a="/after-1-day-visit",c="/after-5-day-email",u="/after-5-day-visit",l="/after-13-day-visit-first",d="/after-13-day-visit-second",p="/after-14-day-email",f="/after-14-day-dangerous-first",h="/after-14-day-dangerous-second",m="/after-15-day-email",g={EBAY_EXCEPTION:"isExceptionsEbay",TOASTERS:"toasters",ALERTS:"alerts",AFFILIATE_ACTIVATED:"affiliateActivated",PARSED_PRODUCTS:"parseProducts",YAMLS:"yamls",CACHE_DOMAINS:"cacheDomains",CACHE_OFFERS:"offersCache",CACHE_DOMAIN_OPTIONS:"domainOptions",CACHE_FOOTPRINT_LIST:"footprintsList",TOKEN:"token",OLD_TOKEN:"oldToken",USER:"user",UUID:"uuid",CLIENT_ID:"clientId",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",COOKIE_OPTIONS:"cookieOptions",USER_SELECTION_IN_COOKIE_MODAL:"userSelectionInCookieModal",SAVED_UUID:"savedUid",TOP_USER_INFO:"topUserInfo",PROMOTION_TARGET_USER_INFO:"promotionTargetUserInfo",SEND_NOTIFICATIONS:"sendNotifications",INSTALL_DATE:"installDate",IS_SENDING_ANONIM_UID:"isSendingAnonimUid",DAYS_VISITED:"daysVisited",FV_PLUS:"fvPlus",ANIMATION_FREEZE:"animationFreeze"},y=[g.ALERTS,g.TOKEN,g.OLD_TOKEN,g.USER,g.UUID,g.UTM_SOURCE,g.UTM_MEDIUM,g.UTM_CAMPAIGN,g.SAVED_UUID,g.CLIENT_ID,g.INSTALL_DATE,g.DAYS_VISITED,g.FV_PLUS],v=["QUOTA_BYTES","QuotaExceededError"];async function clearOverfilledStorage(){const e=await get(null),t=Object.keys(e).filter((e=>!y.includes(e)));await remove(t)}async function get(e){return new Promise((t=>{callBrowser().storage.local.get(e,(e=>{callBrowser().runtime.lastError&&t({}),t(e)}))}))}async function remove(e){return new Promise((t=>{callBrowser().storage.local.remove(e,(()=>{callBrowser().runtime.lastError;t()}))}))}const _={clearOverfilledStorage,get,set:async function set(e){try{await new Promise((async(t,n)=>{try{await callBrowser().storage.local.set(e,(async()=>{const e=callBrowser().runtime.lastError;e&&n(e),t()}))}catch(e){n(e)}}))}catch(e){(!(null==v||!v.find((t=>{var n;return null===(n=e.message)||void 0===n?void 0:n.includes(t)})))||!1)&&setTimeout((()=>{clearOverfilledStorage()}),100)}},remove,clear:async function clear(){return new Promise((e=>{callBrowser().storage.local.clear((()=>{callBrowser().runtime.lastError;e()}))}))},keys:g},E="FIREFOX"!==t.BROWSER&&"SAFARI"!==t.BROWSER;function callBrowser(){return E?chrome:browser}function callBrowserAction(){return E?chrome.action:browser.browserAction}const checkCookieLogic=e=>"CHROME"===t.BROWSER||("EDGE"===t.BROWSER||"OPERA"===t.BROWSER);const getDomain=e=>{let t;try{t=new URL(e)}catch(t){return e}return t.hostname},getDomainWWW=e=>{try{let{host:t}=new URL(e);t=t.replace(/www(\d+)?\./,"");const n=3,isNotTLD=(e,t,r)=>t!==r.length-1&&e.length>n;return t=t.split("."),t=t.slice(Math.max(0,t.findLastIndex(isNotTLD))),t=t.filter((e=>e.length>0)),t=t.join("."),t}catch(t){return e}},checkUrl=t=>e.test(t);function utils_addMinutes(e,t){return new Date(e.getTime()+6e4*t)}function utils_capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}const getActiveTab=()=>new Promise((e=>{var t;const n=null===(t=callBrowser())||void 0===t?void 0:t.tabs;n?n.query({active:!0,windowType:"normal",currentWindow:!0},(t=>{e(t[0]||{})})):e({})}));const checkExclusionAffiliateLinkType=e=>o.includes(e);async function getUserUUID(){const{user:e,savedUid:t}=await _.get([_.keys.USER,_.keys.SAVED_UUID]);let n=null;var r;null!=e&&e.isAuth&&null!=t&&t[e.profile.email]&&(n=(null==t||null===(r=t[e.profile.email])||void 0===r?void 0:r.uuid)||null);return n}function transformExtensions(e,t){const n=[];return e.forEach((({id:e,enabled:r,name:o,description:i,homepageUrl:s,version:a,icons:c,status:u,url:l,extensionId:d})=>{(s||l)&&n.push({extensionId:e||d,enabled:r,name:o,version:a,description:i,icons:c,url:s||l,status:u||t})})),n}function getTime(e){const t=new Date(e).getTime();return!Number.isNaN(t)?t:null}async function checkHasSubscription(){var e;const{user:t={}}=await _.get([_.keys.USER]);return(null==t||null===(e=t.subscriptions)||void 0===e?void 0:e.isActive)||!1}function checkIsObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function objectToQuery(e){return Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}async function getUserSubscription(e="absent"){const{user:t={}}=await _.get([_.keys.USER]),{plan:n=e,status:r=e,type:o=e}=(null==t?void 0:t.subscriptions)||{};return{subscription_type:o,subscription_status:r,subscription_plan:n}}__webpack_require__(1057),__webpack_require__(8324);const b="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function isGlobalObj(e){return e&&e.Math==Math?e:void 0}const S="object"==typeof globalThis&&isGlobalObj(globalThis)||"object"==typeof window&&isGlobalObj(window)||"object"==typeof self&&isGlobalObj(self)||"object"==typeof __webpack_require__.g&&isGlobalObj(__webpack_require__.g)||function(){return this}()||{};function getGlobalObject(){return S}function getGlobalSingleton(e,t,n){const r=n||S,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const w=["debug","info","warn","error","log","assert","trace"],x={};function consoleSandbox(e){if(!("console"in S))return e();const t=S.console,n={},r=Object.keys(x);r.forEach((e=>{const r=x[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const T=function makeLogger(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return b?w.forEach((n=>{t[n]=(...t)=>{e&&consoleSandbox((()=>{S.console[n](`Sentry Logger [${n}]:`,...t)}))}})):w.forEach((e=>{t[e]=()=>{}})),t}(),O=Object.prototype.toString;function isError(e){switch(O.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(e,Error)}}function isBuiltin(e,t){return O.call(e)===`[object ${t}]`}function isErrorEvent(e){return isBuiltin(e,"ErrorEvent")}function isDOMError(e){return isBuiltin(e,"DOMError")}function isString(e){return isBuiltin(e,"String")}function isParameterizedString(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function is_isPrimitive(e){return null===e||isParameterizedString(e)||"object"!=typeof e&&"function"!=typeof e}function isPlainObject(e){return isBuiltin(e,"Object")}function isEvent(e){return"undefined"!=typeof Event&&isInstanceOf(e,Event)}function is_isThenable(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function isInstanceOf(e,t){try{return e instanceof t}catch(e){return!1}}function isVueViewModel(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const k=getGlobalObject(),I=80;function htmlTreeAsString(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||I;for(;n&&i++<r&&(u=_htmlElementAsString(n,l),!("html"===u||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function _htmlElementAsString(e,t){const n=e,r=[];let o,i,s,a,c;if(!n||!n.tagName)return"";if(k.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&isString(o))for(i=o.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}function truncate(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function safeJoin(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{isVueViewModel(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function isMatchingPattern(e,t,n=!1){return!!isString(e)&&(function isRegExp(e){return isBuiltin(e,"RegExp")}(t)?t.test(e):!!isString(t)&&(n?e===t:e.includes(t)))}function stringMatchesSomePattern(e,t=[],n=!1){return t.some((t=>isMatchingPattern(e,t,n)))}function fill(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&markFunctionWrapped(o,r),e[t]=o}function addNonEnumerableProperty(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){b&&T.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function markFunctionWrapped(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,addNonEnumerableProperty(e,"__sentry_original__",t)}catch(e){}}function getOriginalFunction(e){return e.__sentry_original__}function convertToPlainObject(e){if(isError(e))return{message:e.message,name:e.name,stack:e.stack,...getOwnProperties(e)};if(isEvent(e)){const t={type:e.type,target:serializeEventTarget(e.target),currentTarget:serializeEventTarget(e.currentTarget),...getOwnProperties(e)};return"undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}return e}function serializeEventTarget(e){try{return function isElement(e){return"undefined"!=typeof Element&&isInstanceOf(e,Element)}(e)?htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function getOwnProperties(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function object_dropUndefinedKeys(e){return _dropUndefinedKeys(e,new Map)}function _dropUndefinedKeys(e,t){if(function isPojo(e){if(!isPlainObject(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=_dropUndefinedKeys(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(_dropUndefinedKeys(e,t))})),r}return e}function misc_uuid4(){const e=S,t=e.crypto||e.msCrypto;let getRandomByte=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(getRandomByte=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&getRandomByte())>>e/4).toString(16)))}function getFirstException(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function getEventDescription(e){const{message:t,event_id:n}=e;if(t)return t;const r=getFirstException(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function addExceptionTypeValue(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function addExceptionMechanism(e,t){const n=getFirstException(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function checkOrSetAlreadyCaught(e){if(e&&e.__sentry_captured__)return!0;try{addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1}function arrayify(e){return Array.isArray(e)?e:[e]}const A="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var C;function resolvedSyncPromise(e){return new SyncPromise((t=>{t(e)}))}function rejectedSyncPromise(e){return new SyncPromise(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(C||(C={}));class SyncPromise{constructor(e){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=C.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new SyncPromise(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new SyncPromise(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(C.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(C.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===C.PENDING&&(is_isThenable(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===C.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===C.RESOLVED&&e[1](this._value),this._state===C.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function getGlobalEventProcessors(){return getGlobalSingleton("globalEventProcessors",(()=>[]))}function addGlobalEventProcessor(e){getGlobalEventProcessors().push(e)}function notifyEventProcessors(e,t,n,r=0){return new SyncPromise(((o,i)=>{const s=e[r];if(null===t||"function"!=typeof s)o(t);else{const a=s({...t},n);A&&s.id&&null===a&&T.log(`Event processor "${s.id}" dropped event`),is_isThenable(a)?a.then((t=>notifyEventProcessors(e,t,n,r+1).then(o))).then(null,i):notifyEventProcessors(e,a,n,r+1).then(o).then(null,i)}}))}const D=1e3;function dateTimestampInSeconds(){return Date.now()/D}const R=function createUnixTimestampInSecondsFunc(){const{performance:e}=S;if(!e||!e.now)return dateTimestampInSeconds;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/D}();let U;(()=>{const{performance:e}=S;if(!e||!e.now)return void(U="none");const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+n-r):t;i||a<t?o<=a?(U="timeOrigin",e.timeOrigin):U="navigationStart":U="dateNow"})();const P="production";function makeSession(e){const t=R(),n={sid:misc_uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function sessionToJSON(e){return object_dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&updateSession(n,e),n}function updateSession(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||R(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:misc_uuid4()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function closeSession(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),updateSession(e,n)}const N=50,F=/\(error: (.*)\)/,M=/captureMessage|captureException/;function createStackParser(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const i=F.test(n)?n.replace(F,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){r.push(t);break}}if(r.length>=N)break}}return function stripSentryFramesAndReverse(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),M.test(t[t.length-1].function||"")&&(t.pop(),M.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,N).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const j="<anonymous>";function getFunctionName(e){try{return e&&"function"==typeof e&&e.name||j}catch(e){return j}}function normalize(e,t=100,n=1/0){try{return visit("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function normalizeToSize(e,t=3,n=102400){const r=normalize(e,t);return function jsonSize(e){return function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}(r)>n?normalizeToSize(e,t-1,n):r}function visit(e,t,n=1/0,r=1/0,o=function memoBuilder(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function memoize(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function unmemoize(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,s]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!function is_isNaN(e){return"number"==typeof e&&e!=e}(t))return t;const a=function stringifyValue(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==__webpack_require__.g&&t===__webpack_require__.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(isVueViewModel(t))return"[VueViewModel]";if(function isSyntheticEvent(e){return isPlainObject(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${getFunctionName(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function getConstructorName(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return visit("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let d=0;const p=convertToPlainObject(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=visit(e,t,c-1,r,o),d++}return s(t),l}const L=1;function spanToTraceContext(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,tags:a,origin:c}=spanToJSON(e);return object_dropUndefinedKeys({data:r,op:o,parent_span_id:i,span_id:t,status:s,tags:a,trace_id:n,origin:c})}function spanToJSON(e){return function spanIsSpanClass(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function spanIsSampled(e){const{traceFlags:t}=e.spanContext();return Boolean(t&L)}function prepareEvent(e,t,n,r,o,i){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||misc_uuid4(),timestamp:t.timestamp||dateTimestampInSeconds()},u=n.integrations||e.integrations.map((e=>e.name));!function applyClientOptions(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:P);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=truncate(e.message,i));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=truncate(s.value,i));const a=e.request;a&&a.url&&(a.url=truncate(a.url,i))}(c,e),function applyIntegrationsMetadata(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),void 0===t.type&&function applyDebugIds(e,t){const n=S._sentryDebugIds;if(!n)return;let r;const o=$.get(t);o?r=o:(r=new Map,$.set(t,r));const i=Object.keys(n).reduce(((e,o)=>{let i;const s=r.get(o);s?i=s:(i=t(o),r.set(o,i));for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function getFinalScope(e,t){if(!t)return e;const n=e?e.clone():new Scope;return n.update(t),n}(r,n.captureContext);n.mechanism&&addExceptionMechanism(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function getGlobalScope(){H||(H=new Scope);return H}().getScopeData();if(i){mergeScopeData(p,i.getScopeData())}if(l){mergeScopeData(p,l.getScopeData())}const f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),applyScopeDataToEvent(c,p);return notifyEventProcessors([...d,...getGlobalEventProcessors(),...p.eventProcessors],c,n).then((e=>(e&&function applyDebugMeta(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function normalizeEvent(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:normalize(e.data,t,n)}})))},...e.user&&{user:normalize(e.user,t,n)},...e.contexts&&{contexts:normalize(e.contexts,t,n)},...e.extra&&{extra:normalize(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=normalize(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=spanToJSON(e).data;return r&&(e.data=normalize(r,t,n)),e})));return r}(e,s,a):e)))}const $=new WeakMap;function parseEventHintOrCaptureContext(e){if(e)return function hintIsScopeOrFunction(e){return e instanceof Scope||"function"==typeof e}(e)||function hintIsScopeContext(e){return Object.keys(e).some((e=>B.includes(e)))}(e)?{captureContext:e}:e}const B=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function captureException(e,t){return hub_getCurrentHub().captureException(e,parseEventHintOrCaptureContext(t))}function captureEvent(e,t){return hub_getCurrentHub().captureEvent(e,t)}function addBreadcrumb(e,t){hub_getCurrentHub().addBreadcrumb(e,t)}function withScope(...e){const t=hub_getCurrentHub();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function exports_getClient(){return hub_getCurrentHub().getClient()}function getCurrentScope(){return hub_getCurrentHub().getScope()}function startSession(e){const t=exports_getClient(),n=hub_getIsolationScope(),r=getCurrentScope(),{release:o,environment:i=P}=t&&t.getOptions()||{},{userAgent:s}=S.navigator||{},a=makeSession({release:o,environment:i,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&"ok"===c.status&&updateSession(c,{status:"exited"}),endSession(),n.setSession(a),r.setSession(a),a}function endSession(){const e=hub_getIsolationScope(),t=getCurrentScope(),n=t.getSession()||e.getSession();n&&closeSession(n),_sendSessionUpdate(),e.setSession(),t.setSession()}function _sendSessionUpdate(){const e=hub_getIsolationScope(),t=getCurrentScope(),n=exports_getClient(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function captureSession(e=!1){e?endSession():_sendSessionUpdate()}function getRootSpan(e){return e.transaction}function getDynamicSamplingContextFromClient(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},s=object_dropUndefinedKeys({environment:r.environment||P,release:r.release,user_segment:i,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function getDynamicSamplingContextFromSpan(e){const t=exports_getClient();if(!t)return{};const n=getDynamicSamplingContextFromClient(spanToJSON(e).trace_id||"",t,getCurrentScope()),r=getRootSpan(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:i,source:s}=r.metadata;null!=i&&(n.sample_rate=`${i}`);const a=spanToJSON(r);return s&&"url"!==s&&(n.transaction=a.description),n.sampled=String(spanIsSampled(r)),t.emit&&t.emit("createDsc",n),n}function applyScopeDataToEvent(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i,propagationContext:s}=t;!function applyDataToEvent(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=object_dropUndefinedKeys(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=object_dropUndefinedKeys(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=object_dropUndefinedKeys(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=object_dropUndefinedKeys(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});s&&(e.level=s);a&&(e.transaction=a)}(e,t),r&&function applySpanToEvent(e,t){e.contexts={trace:spanToTraceContext(t),...e.contexts};const n=getRootSpan(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:getDynamicSamplingContextFromSpan(t),...e.sdkProcessingMetadata};const r=spanToJSON(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function applyFingerprintToEvent(e,t){e.fingerprint=e.fingerprint?arrayify(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function applyBreadcrumbsToEvent(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function applySdkMetadataToEvent(e,t,n){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t,propagationContext:n}}(e,i,s)}function mergeScopeData(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:f,span:h}=t;mergeAndOverwriteScopeData(e,"extra",n),mergeAndOverwriteScopeData(e,"tags",r),mergeAndOverwriteScopeData(e,"user",o),mergeAndOverwriteScopeData(e,"contexts",i),mergeAndOverwriteScopeData(e,"sdkProcessingMetadata",a),s&&(e.level=s),f&&(e.transactionName=f),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function mergeAndOverwriteScopeData(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let H;class Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=generatePropagationContext()}static clone(e){return e?e.clone():new Scope}clone(){const e=new Scope;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof Scope?t:this}return e instanceof Scope?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):isPlainObject(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=generatePropagationContext(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:dateTimestampInSeconds(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:i,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:i,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){applyScopeDataToEvent(e,this.getScopeData());return notifyEventProcessors([...n,...getGlobalEventProcessors(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:misc_uuid4();if(!this._client)return T.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:misc_uuid4();if(!this._client)return T.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:misc_uuid4();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(T.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function generatePropagationContext(){return{traceId:misc_uuid4(),spanId:misc_uuid4().substring(16)}}const q="7.98.0",z=parseFloat(q),G=100;class Hub{constructor(e,t,n,r=z){let o,i;this._version=r,t?o=t:(o=new Scope,o.setClient(e)),n?i=n:(i=new Scope,i.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return is_isThenable(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:misc_uuid4(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:misc_uuid4(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:misc_uuid4();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=G}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const s={timestamp:dateTimestampInSeconds(),...e},a=o?consoleSandbox((()=>o(s,t))):s;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=makeMain(this);try{e(this)}finally{makeMain(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return A&&T.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(A&&!n){this.getClient()?T.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):T.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&closeSession(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=P}=n&&n.getOptions()||{},{userAgent:i}=S.navigator||{},s=makeSession({release:r,environment:o,user:t.getUser(),...i&&{userAgent:i},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&updateSession(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=getMainCarrier().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);A&&T.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function getMainCarrier(){return S.__SENTRY__=S.__SENTRY__||{extensions:{},hub:void 0},S}function makeMain(e){const t=getMainCarrier(),n=getHubFromCarrier(t);return setHubOnCarrier(t,e),n}function hub_getCurrentHub(){const e=getMainCarrier();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return getGlobalHub(e)}function hub_getIsolationScope(){return hub_getCurrentHub().getIsolationScope()}function getGlobalHub(e=getMainCarrier()){return hasHubOnCarrier(e)&&!getHubFromCarrier(e).isOlderThan(z)||setHubOnCarrier(e,new Hub),getHubFromCarrier(e)}function hasHubOnCarrier(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function getHubFromCarrier(e){return getGlobalSingleton("hub",(()=>new Hub),e)}function setHubOnCarrier(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}const V=[];function getIntegrationsToSetup(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?arrayify(n(t)):t;const o=function filterDuplicates(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),i=function findIndex(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==i){const[e]=o.splice(i,1);o.push(e)}return o}function setupIntegration(e,t,n){if(n[t.name])A&&T.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===V.indexOf(t.name)&&(t.setupOnce(addGlobalEventProcessor,hub_getCurrentHub),V.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}A&&T.log(`Integration installed: ${t.name}`)}}function convertIntegrationFnToClass(e,t){return Object.assign((function ConvertedIntegration(...e){return t(...e)}),{id:e})}const W=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],K=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],J="InboundFilters",inboundFiltersIntegration=(e={})=>({name:J,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),i=function _mergeOptions(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:W],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:K],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function _shouldDropEvent(e,t){if(t.ignoreInternal&&function _isSentryError(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return A&&T.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${getEventDescription(e)}`),!0;if(function _isIgnoredError(e,t){if(e.type||!t||!t.length)return!1;return function _getPossibleEventMessages(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));A&&0===t.length&&T.error(`Could not extract message for event ${getEventDescription(e)}`);return t}(e).some((e=>stringMatchesSomePattern(e,t)))}(e,t.ignoreErrors))return A&&T.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${getEventDescription(e)}`),!0;if(function _isIgnoredTransaction(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&stringMatchesSomePattern(n,t)}(e,t.ignoreTransactions))return A&&T.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${getEventDescription(e)}`),!0;if(function _isDeniedUrl(e,t){if(!t||!t.length)return!1;const n=_getEventFilterUrl(e);return!!n&&stringMatchesSomePattern(n,t)}(e,t.denyUrls))return A&&T.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${getEventDescription(e)}.\nUrl: ${_getEventFilterUrl(e)}`),!0;if(!function _isAllowedUrl(e,t){if(!t||!t.length)return!0;const n=_getEventFilterUrl(e);return!n||stringMatchesSomePattern(n,t)}(e,t.allowUrls))return A&&T.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${getEventDescription(e)}.\nUrl: ${_getEventFilterUrl(e)}`),!0;return!1}(t,i)?null:t}});convertIntegrationFnToClass(J,inboundFiltersIntegration);function _getEventFilterUrl(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function _getLastValidUrl(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return A&&T.error(`Cannot extract url for event ${getEventDescription(e)}`),null}}let Y;const X="FunctionToString",functionToStringIntegration=()=>({name:X,setupOnce(){Y=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=getOriginalFunction(this)||this;return Y.apply(t,e)}}catch(e){}}});convertIntegrationFnToClass(X,functionToStringIntegration);function initAndBind(e,t){!0===t.debug&&(A?T.enable():consoleSandbox((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})));getCurrentScope().update(t.initialScope);const n=new e(t);!function setCurrentClient(e){const t=hub_getCurrentHub().getStackTop();t.client=e,t.scope.setClient(e)}(n),function initializeClient(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}const Q=getGlobalObject();function supportsFetch(){if(!("fetch"in Q))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function isNativeFetch(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const Z=getGlobalObject();const ee={},te={};function addHandler(e,t){ee[e]=ee[e]||[],ee[e].push(t)}function maybeInstrument(e,t){te[e]||(t(),te[e]=!0)}function triggerHandlers(e,t){const n=e&&ee[e];if(n)for(const r of n)try{r(t)}catch(t){b&&T.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${getFunctionName(r)}\nError:`,t)}}const ne=S;let re;function addHistoryInstrumentationHandler(e){const t="history";addHandler(t,e),maybeInstrument(t,instrumentHistory)}function instrumentHistory(){if(!function supportsHistory(){const e=Z.chrome,t=e&&e.app&&e.app.runtime,n="history"in Z&&!!Z.history.pushState&&!!Z.history.replaceState;return!t&&n}())return;const e=ne.onpopstate;function historyReplacementFunction(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=re,t=String(n);re=t;triggerHandlers("history",{from:e,to:t})}return e.apply(this,t)}}ne.onpopstate=function(...t){const n=ne.location.href,r=re;re=n;if(triggerHandlers("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},fill(ne.history,"pushState",historyReplacementFunction),fill(ne.history,"replaceState",historyReplacementFunction)}const oe=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsn_dsnToString(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function dsnFromComponents(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function dsn_makeDsn(e){const t="string"==typeof e?function dsnFromString(e){const t=oe.exec(e);if(!t)return void consoleSandbox((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return dsnFromComponents({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}(e):dsnFromComponents(e);if(t&&function validateDsn(e){if(!b)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(T.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function isValidProtocol(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(T.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(T.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(T.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function createEnvelope(e,t=[]){return[e,t]}function addItemToEnvelope(e,t){const[n,r]=e;return[n,[...r,t]]}function forEachEnvelopeItem(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function encodeUTF8(e,t){return(t||new TextEncoder).encode(e)}function serializeEnvelope(e,t){const[n,r]=e;let o=JSON.stringify(n);function append(e){"string"==typeof o?o="string"==typeof e?o+e:[encodeUTF8(o,t),e]:o.push("string"==typeof e?encodeUTF8(e,t):e)}for(const e of r){const[t,n]=e;if(append(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)append(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(normalize(n))}append(e)}}return"string"==typeof o?o:function concatBuffers(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function createAttachmentEnvelopeItem(e,t){const n="string"==typeof e.data?encodeUTF8(e.data,t):e.data;return[object_dropUndefinedKeys({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const ie={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function envelopeItemTypeToDataCategory(e){return ie[e]}function getSdkMetadataForEnvelopeHeader(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}class SentryError extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const se="7";function getBaseApiEndpoint(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function _encodedAuth(e,t){return function urlEncode(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}({sentry_key:e.publicKey,sentry_version:se,...t&&{sentry_client:`${t.name}/${t.version}`}})}function getEnvelopeEndpointWithUrlEncodedAuth(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function _getIngestEndpoint(e){return`${getBaseApiEndpoint(e)}${e.projectId}/envelope/`}(e)}?${_encodedAuth(e,r)}`}function createEventEnvelope(e,t,n,r){const o=getSdkMetadataForEnvelopeHeader(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function enhanceEventWithSdkInfo(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]],e):e}(e,n&&n.sdk);const s=function createEventEnvelopeHeaders(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:dsn_dsnToString(r)},...o&&{trace:object_dropUndefinedKeys({...o})}}}(e,o,r,t);delete e.sdkProcessingMetadata;return createEnvelope(s,[[{type:i},e]])}function createMetricEnvelope(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=dsn_dsnToString(t));const i=function createMetricEnvelopeItem(e){const t=function serializeMetricBuckets(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return createEnvelope(o,[i])}const ae="Not capturing exception because it's already been captured.";class BaseClient{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=dsn_makeDsn(e.dsn):A&&T.warn("No DSN provided, client will not send events."),this._dsn){const t=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(checkOrSetAlreadyCaught(e))return void(A&&T.log(ae));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const i=isParameterizedString(e)?e:String(e),s=is_isPrimitive(e)?this.eventFromMessage(i,t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&checkOrSetAlreadyCaught(t.originalException))return void(A&&T.log(ae));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?A&&T.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),updateSession(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):resolvedSyncPromise(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return A&&T.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){setupIntegration(this,e,this._integrations)}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=addItemToEnvelope(n,createAttachmentEnvelopeItem(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function createSessionEnvelope(e,t,n,r){const o=getSdkMetadataForEnvelopeHeader(n);return createEnvelope({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:dsn_dsnToString(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;A&&T.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){A&&T.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=createMetricEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){this._integrations=function setupIntegrations(e,t){const n={};return t.forEach((t=>{t&&setupIntegration(e,t,n)})),n}(this,this._options.integrations),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(updateSession(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new SyncPromise((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=hub_getIsolationScope()){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),prepareEvent(o,e,t,n,this,r).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:i,dsc:s}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:i},...e.contexts};const a=s||getDynamicSamplingContextFromClient(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(A){const t=e;"log"===t.logLevel?T.log(t.message):T.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,i=isTransactionEvent(e),s=baseclient_isErrorEvent(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),rejectedSyncPromise(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new SentryError("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function processBeforeSend(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(baseclient_isErrorEvent(t)&&r)return r(t,n);if(isTransactionEvent(t)&&o)return o(t,n);return t}(r,n,t);return function _validateBeforeSendResult(e,t){const n=`${t} must return \`null\` or a valid event.`;if(is_isThenable(e))return e.then((e=>{if(!isPlainObject(e)&&null!==e)throw new SentryError(n);return e}),(e=>{throw new SentryError(`${t} rejected with ${e}`)}));if(!isPlainObject(e)&&null!==e)throw new SentryError(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,e),new SentryError(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!i&&o&&this._updateSessionFromEvent(o,r);const s=r.transaction_info;if(i&&s&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...s,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{A&&T.error("Error while sending event:",e)}));A&&T.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function baseclient_isErrorEvent(e){return void 0===e.type}function isTransactionEvent(e){return"transaction"===e.type}const ce="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function exceptionFromError(e,t){const n=parseStackFrames(e,t),r={type:t&&t.name,value:extractMessage(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function eventFromError(e,t){return{exception:{values:[exceptionFromError(e,t)]}}}function parseStackFrames(e,t){const n=t.stacktrace||t.stack||"",r=function getPopSize(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(ue.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const ue=/Minified React error #\d+;/i;function extractMessage(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function eventFromUnknownInput(e,t,n,r,o){let i;if(isErrorEvent(t)&&t.error){return eventFromError(e,t.error)}if(isDOMError(t)||function isDOMException(e){return isBuiltin(e,"DOMException")}(t)){const o=t;if("stack"in t)i=eventFromError(e,t);else{const t=o.name||(isDOMError(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;i=eventFromString(e,s,n,r),addExceptionTypeValue(i,s)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(isError(t))return eventFromError(e,t);if(isPlainObject(t)||isEvent(t)){return i=function eventFromPlainObject(e,t,n,r){const o=exports_getClient(),i=o&&o.getOptions().normalizeDepth,s={exception:{values:[{type:isEvent(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(t,{isUnhandledRejection:r})}]},extra:{__serialized__:normalizeToSize(t,i)}};if(n){const t=parseStackFrames(e,n);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,n,o),addExceptionMechanism(i,{synthetic:!0}),i}return i=eventFromString(e,t,n,r),addExceptionTypeValue(i,`${t}`,void 0),addExceptionMechanism(i,{synthetic:!0}),i}function eventFromString(e,t,n,r){const o={};if(r&&n){const r=parseStackFrames(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function getNonErrorObjectExceptionValue(e,{isUnhandledRejection:t}){const n=function extractExceptionKeysForMessage(e,t=40){const n=Object.keys(convertToPlainObject(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return truncate(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:truncate(r,t)}return""}(e),r=t?"promise rejection":"exception";if(isErrorEvent(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(isEvent(e)){return`Event \`${function getObjectClassName(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}const le=S;let de=0;function shouldIgnoreOnError(){return de>0}function wrap(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(getOriginalFunction(e))return e}catch(t){return e}const sentryWrapped=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>wrap(e,t)));return e.apply(this,o)}catch(e){throw function ignoreNextOnError(){de++,setTimeout((()=>{de--}))}(),withScope((n=>{n.addEventProcessor((e=>(t.mechanism&&(addExceptionTypeValue(e,void 0,void 0),addExceptionMechanism(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),captureException(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(sentryWrapped[t]=e[t])}catch(e){}markFunctionWrapped(sentryWrapped,e),addNonEnumerableProperty(e,"__sentry_wrapped__",sentryWrapped);try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:()=>e.name})}catch(e){}return sentryWrapped}class BrowserClient extends BaseClient{constructor(e){!function applySdkMetadata(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:q}))),version:q}),e._metadata=o}(e,"browser",["browser"],le.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&le.document&&le.document.addEventListener("visibilitychange",(()=>{"hidden"===le.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function eventFromException(e,t,n,r){const o=eventFromUnknownInput(e,t,n&&n.syntheticException||void 0,r);return addExceptionMechanism(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),resolvedSyncPromise(o)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function eventFromMessage(e,t,n="info",r,o){const i=eventFromString(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),resolvedSyncPromise(i)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(ce&&T.warn("SDK not enabled, will not capture user feedback."));const t=function createUserFeedbackEnvelope(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:dsn_dsnToString(r)}},i=function createUserFeedbackEnvelopeItem(e){return[{type:"user_report"},e]}(e);return createEnvelope(o,[i])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(ce&&T.log("No outcomes to send"));if(!this._dsn)return void(ce&&T.log("No dsn provided, will not send outcomes"));ce&&T.log("Sending outcomes:",e);const t=function createClientReportEnvelope(e,t,n){return createEnvelope(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:n||dateTimestampInSeconds(),discarded_events:e}]])}(e,this._options.tunnel&&dsn_dsnToString(this._dsn));this._sendEnvelope(t)}}function instrumentConsole(){"console"in S&&w.forEach((function(e){e in S.console&&fill(S.console,e,(function(t){return x[e]=t,function(...t){triggerHandlers("console",{args:t,level:e});const n=x[e];n&&n.apply(S.console,t)}}))}))}const pe=S,fe=1e3;let he,me,ge;function instrumentDOM(){if(!pe.document)return;const e=triggerHandlers.bind(null,"dom"),t=makeDOMEventHandler(e,!0);pe.document.addEventListener("click",t,!1),pe.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=pe[t]&&pe[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const r=makeDOMEventHandler(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function makeDOMEventHandler(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function getEventTarget(e){try{return e.target}catch(e){return null}}(n);if(function shouldSkipDOMEvent(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;addNonEnumerableProperty(n,"_sentryCaptured",!0),r&&!r._sentryId&&addNonEnumerableProperty(r,"_sentryId",misc_uuid4());const o="keypress"===n.type?"input":n.type;if(!function isSimilarToLastCapturedEvent(e){if(e.type!==me)return!1;try{if(!e.target||e.target._sentryId!==ge)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),me=n.type,ge=r?r._sentryId:void 0}clearTimeout(he),he=pe.setTimeout((()=>{ge=void 0,me=void 0}),fe)}}const ye=S,ve="__sentry_xhr_v3__";function instrumentXHR(){if(!ye.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;fill(e,"open",(function(e){return function(...t){const n=Date.now(),r=isString(t[0])?t[0].toUpperCase():void 0,o=function parseUrl(e){if(isString(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[ve]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const onreadystatechangeHandler=()=>{const e=this[ve];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}triggerHandlers("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?fill(this,"onreadystatechange",(function(e){return function(...t){return onreadystatechangeHandler(),e.apply(this,t)}})):this.addEventListener("readystatechange",onreadystatechangeHandler),fill(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[ve];return o&&isString(n)&&isString(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),fill(e,"send",(function(e){return function(...t){const n=this[ve];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return triggerHandlers("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function instrumentFetch(){(function supportsNativeFetch(){if("string"==typeof EdgeRuntime)return!0;if(!supportsFetch())return!1;if(isNativeFetch(Q.fetch))return!0;let e=!1;const t=Q.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=isNativeFetch(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){b&&T.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&fill(S,"fetch",(function(e){return function(...t){const{method:n,url:r}=function parseFetchArgs(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:getUrlFromResource(t),method:hasProp(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:getUrlFromResource(t),method:hasProp(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return triggerHandlers("fetch",{...o}),e.apply(S,t).then((e=>(triggerHandlers("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw triggerHandlers("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function hasProp(e,t){return!!e&&"object"==typeof e&&!!e[t]}function getUrlFromResource(e){return"string"==typeof e?e:e?hasProp(e,"url")?e.url:e.toString?e.toString():"":""}const _e=["fatal","error","warning","log","info","debug"];function severityLevelFromString(e){return"warn"===e?"warning":_e.includes(e)?e:"log"}function url_parseUrl(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Ee=1024,be="Breadcrumbs",breadcrumbsIntegration=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:be,setupOnce(){},setup(e){t.console&&function addConsoleInstrumentationHandler(e){const t="console";addHandler(t,e),maybeInstrument(t,instrumentConsole)}(function _getConsoleBreadcrumbHandler(e){return function _consoleBreadcrumb(t){if(exports_getClient()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:severityLevelFromString(t.level),message:safeJoin(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${safeJoin(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}addBreadcrumb(n,{input:t.args,level:t.level})}}(e)),t.dom&&function addClickKeypressInstrumentationHandler(e){addHandler("dom",e),maybeInstrument("dom",instrumentDOM)}(function _getDomBreadcrumbHandler(e,t){return function _innerDomBreadcrumb(n){if(exports_getClient()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Ee&&(ce&&T.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=Ee),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function _isEvent(e){return!!e&&!!e.target}(e)?e.target:e;r=htmlTreeAsString(t,{keyAttrs:i,maxStringLength:s}),o=function getComponentName(e){if(!k.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),addBreadcrumb(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&function addXhrInstrumentationHandler(e){addHandler("xhr",e),maybeInstrument("xhr",instrumentXHR)}(function _getXhrBreadcrumbHandler(e){return function _xhrBreadcrumb(t){if(exports_getClient()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[ve];if(!n||!r||!o)return;const{method:i,url:s,status_code:a,body:c}=o;addBreadcrumb({category:"xhr",data:{method:i,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&function addFetchInstrumentationHandler(e){const t="fetch";addHandler(t,e),maybeInstrument(t,instrumentFetch)}(function _getFetchBreadcrumbHandler(e){return function _fetchBreadcrumb(t){if(exports_getClient()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;addBreadcrumb({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&addHistoryInstrumentationHandler(function _getHistoryBreadcrumbHandler(e){return function _historyBreadcrumb(t){if(exports_getClient()!==e)return;let n=t.from,r=t.to;const o=url_parseUrl(le.location.href);let i=n?url_parseUrl(n):void 0;const s=url_parseUrl(r);i&&i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),addBreadcrumb({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function _getSentryBreadcrumbHandler(e){return function addSentryBreadcrumb(t){exports_getClient()===e&&addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:getEventDescription(t)},{event:t})}}(e))}}};convertIntegrationFnToClass(be,breadcrumbsIntegration);const Se="Dedupe",dedupeIntegration=()=>{let e;return{name:Se,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function dedupe_shouldDropEvent(e,t){if(!t)return!1;if(function _isSameMessageEvent(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!_isSameFingerprint(e,t))return!1;if(!_isSameStacktrace(e,t))return!1;return!0}(e,t))return!0;if(function _isSameExceptionEvent(e,t){const n=_getExceptionFromEvent(t),r=_getExceptionFromEvent(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!_isSameFingerprint(e,t))return!1;if(!_isSameStacktrace(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return ce&&T.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};convertIntegrationFnToClass(Se,dedupeIntegration);function _isSameStacktrace(e,t){let n=_getFramesFromEvent(e),r=_getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function _isSameFingerprint(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function _getExceptionFromEvent(e){return e.exception&&e.exception.values&&e.exception.values[0]}function _getFramesFromEvent(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}let we=null;function instrumentError(){we=S.onerror,S.onerror=function(e,t,n,r,o){return triggerHandlers("error",{column:r,error:o,line:n,msg:e,url:t}),!(!we||we.__SENTRY_LOADER__)&&we.apply(this,arguments)},S.onerror.__SENTRY_INSTRUMENTED__=!0}let xe=null;function instrumentUnhandledRejection(){xe=S.onunhandledrejection,S.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!(xe&&!xe.__SENTRY_LOADER__)||xe.apply(this,arguments)},S.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Te="GlobalHandlers",globalHandlersIntegration=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Te,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function _installGlobalOnErrorHandler(e){!function addGlobalErrorInstrumentationHandler(e){const t="error";addHandler(t,e),maybeInstrument(t,instrumentError)}((t=>{const{stackParser:n,attachStacktrace:r}=getOptions();if(exports_getClient()!==e||shouldIgnoreOnError())return;const{msg:o,url:i,line:s,column:a,error:c}=t,u=void 0===c&&isString(o)?function _eventFromIncompleteOnError(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=isErrorEvent(e)?e.message:e,s="Error";const a=i.match(o);a&&(s=a[1],i=a[2]);const c={exception:{values:[{type:s,value:i}]}};return _enhanceEventWithInitialFrame(c,t,n,r)}(o,i,s,a):_enhanceEventWithInitialFrame(eventFromUnknownInput(n,c||o,void 0,r,!1),i,s,a);u.level="error",captureEvent(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),globalHandlerLog("onerror")),t.onunhandledrejection&&(!function _installGlobalOnUnhandledRejectionHandler(e){!function addGlobalUnhandledRejectionInstrumentationHandler(e){const t="unhandledrejection";addHandler(t,e),maybeInstrument(t,instrumentUnhandledRejection)}((t=>{const{stackParser:n,attachStacktrace:r}=getOptions();if(exports_getClient()!==e||shouldIgnoreOnError())return;const o=function _getUnhandledRejectionError(e){if(is_isPrimitive(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),i=is_isPrimitive(o)?function _eventFromRejectionWithPrimitive(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}(o):eventFromUnknownInput(n,o,void 0,r,!0);i.level="error",captureEvent(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),globalHandlerLog("onunhandledrejection"))}}};convertIntegrationFnToClass(Te,globalHandlersIntegration);function _enhanceEventWithInitialFrame(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=isString(t)&&t.length>0?t:function getLocationHref(){try{return k.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function globalHandlerLog(e){ce&&T.log(`Global Handler attached: ${e}`)}function getOptions(){const e=exports_getClient();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Oe="HttpContext",httpContextIntegration=()=>({name:Oe,setupOnce(){},preprocessEvent(e){if(!le.navigator&&!le.location&&!le.document)return;const t=e.request&&e.request.url||le.location&&le.location.href,{referrer:n}=le.document||{},{userAgent:r}=le.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}});convertIntegrationFnToClass(Oe,httpContextIntegration);function applyAggregateErrorsToEvent(e,t,n=250,r,o,i,s){if(!(i.exception&&i.exception.values&&s&&isInstanceOf(s.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=function truncateAggregateExceptions(e,t){return e.map((e=>(e.value&&(e.value=truncate(e.value,t)),e)))}(aggregateExceptionsFromError(e,t,o,s.originalException,r,i.exception.values,a,0),n))}function aggregateExceptionsFromError(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(isInstanceOf(r[o],Error)){applyExceptionGroupFieldsForParentException(s,a);const i=e(t,r[o]),u=c.length;applyExceptionGroupFieldsForChildException(i,o,u,a),c=aggregateExceptionsFromError(e,t,n,r[o],o,[i,...c],i,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(isInstanceOf(r,Error)){applyExceptionGroupFieldsForParentException(s,a);const u=e(t,r),l=c.length;applyExceptionGroupFieldsForChildException(u,`errors[${i}]`,l,a),c=aggregateExceptionsFromError(e,t,n,r,o,[u,...c],u,l)}})),c}function applyExceptionGroupFieldsForParentException(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function applyExceptionGroupFieldsForChildException(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const ke="LinkedErrors",linkedErrorsIntegration=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:ke,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();applyAggregateErrorsToEvent(exceptionFromError,i.stackParser,i.maxValueLength,n,t,e,r)}}},Ie=(convertIntegrationFnToClass(ke,linkedErrorsIntegration),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),Ae="TryCatch",browserApiErrorsIntegration=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ae,setupOnce(){t.setTimeout&&fill(le,"setTimeout",_wrapTimeFunction),t.setInterval&&fill(le,"setInterval",_wrapTimeFunction),t.requestAnimationFrame&&fill(le,"requestAnimationFrame",_wrapRAF),t.XMLHttpRequest&&"XMLHttpRequest"in le&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Ie).forEach(_wrapEventTarget)}}}};convertIntegrationFnToClass(Ae,browserApiErrorsIntegration);function _wrapTimeFunction(e){return function(...t){const n=t[0];return t[0]=wrap(n,{mechanism:{data:{function:getFunctionName(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function _wrapRAF(e){return function(t){return e.apply(this,[wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(e)},handled:!1,type:"instrument"}})])}}function _wrapXHR(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&fill(n,e,(function(t){const n={mechanism:{data:{function:e,handler:getFunctionName(t)},handled:!1,type:"instrument"}},r=getOriginalFunction(t);return r&&(n.mechanism.data.handler=getFunctionName(r)),wrap(t,n)}))})),e.apply(this,t)}}function _wrapEventTarget(e){const t=le,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=wrap(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:getFunctionName(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,wrap(r,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(r),target:e},handled:!1,type:"instrument"}}),o])}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const Ce="?";function createFrame(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const De=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Re=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ue=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ne=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Fe=createStackParser(...[[30,e=>{const t=De.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Re.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=extractSafariExtensionDetails(t[1]||Ce,t[2]);return createFrame(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Ue.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Pe.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Ce;return[n,e]=extractSafariExtensionDetails(n,e),createFrame(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Ne.exec(e);return t?createFrame(t[2],t[1]||Ce,+t[3],t[4]?+t[4]:void 0):void 0}]]),extractSafariExtensionDetails=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Ce,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function makePromiseBuffer(e){const t=[];function remove(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function add(n){if(!function isReady(){return void 0===e||t.length<e}())return rejectedSyncPromise(new SentryError("Not adding Promise because buffer limit was reached."));const r=n();return-1===t.indexOf(r)&&t.push(r),r.then((()=>remove(r))).then(null,(()=>remove(r).then(null,(()=>{})))),r},drain:function drain(e){return new SyncPromise(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{resolvedSyncPromise(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}const Me=6e4;function updateRateLimits(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n]=e.split(":",2),i=parseInt(t,10),s=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))o[e]=r+s;else o.all=r+s}else s?o.all=r+function parseRetryAfterHeader(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?Me:r-t}(s,r):429===t&&(o.all=r+6e4);return o}const je=30;function createTransport(e,t,n=makePromiseBuffer(e.bufferSize||je)){let r={};function send(o){const i=[];if(forEachEnvelopeItem(o,((t,n)=>{const o=envelopeItemTypeToDataCategory(n);if(function isRateLimited(e,t,n=Date.now()){return function disabledUntil(e,t){return e[t]||e.all||0}(e,t)>n}(r,o)){const r=getEventForEnvelopeItem(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(t)})),0===i.length)return resolvedSyncPromise();const s=createEnvelope(o[0],i),recordEnvelopeLoss=t=>{forEachEnvelopeItem(s,((n,r)=>{const o=getEventForEnvelopeItem(n,r);e.recordDroppedEvent(t,envelopeItemTypeToDataCategory(r),o)}))};return n.add((()=>t({body:serializeEnvelope(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&A&&T.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=updateRateLimits(r,e),e)),(e=>{throw recordEnvelopeLoss("network_error"),e})))).then((e=>e),(e=>{if(e instanceof SentryError)return A&&T.error("Skipped sending event because buffer is full."),recordEnvelopeLoss("queue_overflow"),resolvedSyncPromise();throw e}))}return send.__sentry__baseTransport__=!0,{send,flush:e=>n.drain(e)}}function getEventForEnvelopeItem(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let Le;function makeFetchTransport(e,t=function getNativeFetchImplementation(){if(Le)return Le;if(isNativeFetch(le.fetch))return Le=le.fetch.bind(le);const e=le.document;let t=le.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){ce&&T.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Le=t.bind(le)}()){let n=0,r=0;return createTransport(e,(function makeRequest(o){const i=o.body.length;n+=i,r++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return function clearCachedFetchImplementation(){Le=void 0}(),n-=i,r--,rejectedSyncPromise(e)}}))}const $e=4;function makeXHRTransport(e){return createTransport(e,(function makeRequest(t){return new SyncPromise(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{o.readyState===$e&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Be=[inboundFiltersIntegration(),functionToStringIntegration(),browserApiErrorsIntegration(),breadcrumbsIntegration(),globalHandlersIntegration(),linkedErrorsIntegration(),dedupeIntegration(),httpContextIntegration()];function init(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=function getDefaultIntegrations(e){return[...Be]}()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),le.SENTRY_RELEASE&&le.SENTRY_RELEASE.id&&(e.release=le.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Fe,Array.isArray(n)?createStackParser(...n):n),integrations:getIntegrationsToSetup(e),transport:e.transport||(supportsFetch()?makeFetchTransport:makeXHRTransport)};var n;initAndBind(BrowserClient,t),e.autoSessionTracking&&function startSessionTracking(){if(void 0===le.document)return void(ce&&T.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler((({from:e,to:t})=>{void 0!==e&&e!==t&&(startSession({ignoreDuration:!0}),captureSession())}))}()}const He="ae8be8bd-cac0-402e-a030-5f0d6fd9760a",qe="PROD"!==t.API_ENV,ze={toasterShown:"toaster_shown",toasterClicked:"toaster_clicked",toasterClosed:"toaster_closed",login:"login",affiliateRedirect:"affiliate_redirect",cookieStatistics:"ext_cookie_statistics",install:"install",update:"update",findOutMore:"find_out_more",cashbackActivated:"cashback_activated",couponProposed:"coupon_proposed",couponChecked:"coupon_checked",urlChecked:"url_checked",urlStart:"url_start",resultsExpanded:"results_expanded",onboardingSendEmail:"onboarding_send_email",priceComparisonExecution:"price_comparison_execution",protectStart:"protect_start_ext",protectChecked:"protect_checked_ext",setPermissions:"set_permissions",extensionsBlocking:"extensions_blocking",notificationsBlocking:"notifications_blocking",cookieModalDefaultAccept:"cookie_modal_default_accept",cookieModalClick:"cookie_modal_click",cookieModalShow:"cookie_modal_show",cookieModalDomainView:"cookie_modal_domain_view",cookieModalDomainError:"cookie_modal_domain_error"};async function getTags({prototypeTags:e,customTags:t}){return function clearEmptyTags(e){return Object.keys(e).reduce(((t,n)=>"string"==typeof e[n]&&e[n].length>0?{...t,[n]:e[n].substring(0,200)}:t),{})}({...await async function getDefaultTags(){const{url:e=""}=await getActiveTab(),t=getDomainWWW(e),{uuid:n}=await _.get([_.keys.UUID]);return{domain:t,url:e,userUuid:await getUserUUID(),anonymUid:n}}(),...e,...t})}const getExceptionType=e=>e instanceof Error?"error":checkIsObject(e)?"object":"string",Ge=["Domain not exists","Wrong URL","An unexpected error occurred","QuotaExceededError","domain not valid","User does not have active paid subscription","Failed to fetch","AbortError","TimeoutError","NetworkError,","No message"];async function initSentry(){try{if(qe)return;let{clientId:e}=await _.get(["clientId"]);e||(qe?e=He:(e=self.crypto.randomUUID(),await _.set({clientId:e}))),init({dsn:"https://accc2ea6dd3c1731732c61aa4e480660@o4506358837477376.ingest.sentry.io/4506358895149056",tracesSampleRate:1,release:t.VERSION,beforeSend(e,t){var n,r;const o=(null==t||null===(n=t.originalException)||void 0===n?void 0:n.message)||null,i=(null==t||null===(r=t.captureContext)||void 0===r||null===(r=r.extra)||void 0===r?void 0:r.fetchResponse)||null||o||"No message",s=!(null==Ge||!Ge.find((e=>null==i?void 0:i.includes(e))));return i&&s?null:e}}),function setUser(e){hub_getCurrentHub().setUser(e)}({id:e})}catch(e){}}async function sentry_captureExceptionSentry(e,t){if(qe)return;const{tags:n={},extra:r={},title:o}=t||{},{prototypeExtra:i={},prototypeTags:s={}}=e||{},a=getExceptionType(e),c=await getTags({prototypeTags:s,customTags:n}),u=await async function getExtra({prototypeExtra:e,customExtra:t}){return{...e,...t}}({prototypeExtra:i,customExtra:r}),l={tags:c,extra:u};switch(a){case"error":captureException(e,l);break;case"object":delete e.code,delete e.error;const t=JSON.stringify(e);captureException(new Error(o||t),l);break;default:captureException(new Error(String(o||e)),l)}}const detectOS=e=>{let t="unknow";return-1!==e.indexOf("Windows NT 10.0")&&(t="Windows 10"),-1!==e.indexOf("Windows NT 6.3")&&(t="Windows 8.1"),-1!==e.indexOf("Windows NT 6.2")&&(t="Windows 8"),-1!==e.indexOf("Windows NT 6.1")&&(t="Windows 7"),-1!==e.indexOf("Windows NT 6.0")&&(t="Windows Vista"),-1!==e.indexOf("Windows NT 5.1")&&(t="Windows XP"),-1!==e.indexOf("Windows NT 5.0")&&(t="Windows 2000"),-1!==e.indexOf("Mac")&&(t="MacOS"),-1!==e.indexOf("X11")&&(t="UNIX"),-1!==e.indexOf("Linux")&&(t="Linux"),t},detectBrowser=e=>{if(-1!==(e.indexOf("Opera")||e.indexOf("OPR")))return"Opera";if(-1!==e.indexOf("Edg"))return"Edge";if(-1!==e.indexOf("Chrome"))return"Chrome";if(-1!==e.indexOf("Safari"))return"Safari";if(-1!==e.indexOf("Firefox"))return"Firefox";if(-1!==e.indexOf("MSIE"))return"IE";const n=t.BROWSER||null;return n?utils_capitalizeFirstLetter(n.toLowerCase()):"unknow"},detectBrowserVersion=e=>{const t={},n=e.userAgent;t.uaString=e.userAgent;const r=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d.]+)/i)||[];r[1]&&(r[1]=r[1].toLowerCase());let o="chrome"===r[1];if(o&&(o=n.match(/\bOPR\/([\d.]+)/)),/trident/i.test(r[1])){const e=/\brv[ :]+([\d.]+)/g.exec(n)||[];t.name="msie",t.version=e[1]}else if(o)t.name="opera",t.version=o[1];else if("safari"===r[1]){const e=n.match(/version\/([\d.]+)/i);t.name="safari",t.version=e[1]}else t.name=r[1],t.version=r[2];const i=[];if(t.version){const e=t.version.match(/(\d+)/g)||[];for(let t=0;t<e.length;t+=1)i.push(e[t]);i.length>0&&(t.majorVersion=i[0])}return t.name=t.name||"(unknown browser name)",t.version={full:t.version||"(unknown full browser version)",parts:i,major:i.length>0?i[0]:"(unknown major browser version)"},t};async function getBrowserInfo(){return new Promise((async e=>{await callBrowser().tabs.query({},(async()=>{const t=detectOS(self.navigator.appVersion),n=detectBrowser(self.navigator.appVersion),r=detectBrowserVersion(self.navigator).version.full,{language:o}=self.navigator,i=o.split("-")[0].toUpperCase();e({os:t,browser:n,browserVersion:r,language:i})}))}))}const Ve=new class Analytics{constructor({debug:e=!1}){this.debug=e,this._extensionVersion=t.VERSION,this._sessionData=null,this._os=null,this._browser=null,this._browserVersion=null,this._uuid=null,this._userUid=null,this._clientId=null,this.events=ze}async getOrCreateClientId(){if(this._clientId)return this._clientId;let{clientId:e}=await _.get(["clientId"]);return e||(e=this.debug?He:self.crypto.randomUUID(),await _.set({clientId:e})),this._clientId=e,e}async _getBrowserInfo(){if(this._os&&this._browser&&this._browserVersion)return{os:this._os,browser:this._browser,browserVersion:this._browserVersion};const{os:e,browser:t,browserVersion:n}=await getBrowserInfo();return this._os=e,this._browser=t,this._browserVersion=n,{os:e,browser:t,browserVersion:n}}async _getOrCreateSessionId(){var e;let t;if(this._sessionData)t=this._sessionData;else{const{sessionData:e}=await _.get(["sessionData"]);t=checkIsObject(e)?e:{}}const n=Date.now();if(function checkIsNumber(e){return e&&!isNaN(e)}(null===(e=t)||void 0===e?void 0:e.timestamp)){(n-t.timestamp)/6e4>30?t=null:(t.timestamp=n,await _.set({sessionData:t}))}return t||(t={session_id:n.toString(),timestamp:n.toString()},await _.set({sessionData:t})),this._sessionData=t,t.session_id}async _getUUID(){var e;if(this._userUid)return this._uuid;const{user:t={},uuid:n=null}=await _.get([_.keys.USER,_.keys.UUID]);return{userUid:(null==t||null===(e=t.profile)||void 0===e?void 0:e.publicId)||null,uuid:n}}async _fireEvent(e,t={}){const n={...t},{os:r,browser:o,browserVersion:i}=await this._getBrowserInfo(),{userUid:s,uuid:a}=await this._getUUID();n.session_id||(n.session_id=await this._getOrCreateSessionId()),n.engagement_time_msec||this.debug||(n.engagement_time_msec=100),a&&(n.uuid=a),r&&(n.os=r),o&&(n.browser=o),i&&(n.browser_version=i),this._extensionVersion&&(n.extension_version=this._extensionVersion),this.debug&&(n.debug_mode=!0);const c=`https://www.google-analytics.com/mp/collect?${objectToQuery({measurement_id:"G-E0ZES9S3X2",api_secret:"grSH5AOWTu-LVm6iTGc14w"})}`;try{const t={client_id:await this.getOrCreateClientId(),events:[{name:e,params:n}]};s&&(t.user_id=s),await fetch(c,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),this.debug}catch(e){}}async fireErrorEvent({url:e,domain:t,error:n,stack:r}){return this._fireEvent("extension_error",{url:e,error:n,stack:r,target_domain:t})}async sendEvent(e,t=null){const{event:n,...r}=(null==e?void 0:e.data)||{};let o=(null==r?void 0:r.url)||null;if(!o&&(t&&(o=(null==t?void 0:t.url)||null),!o)){const e=await getActiveTab();o=(null==e?void 0:e.url)||null}return o&&(r.url=o,r.target_domain=getDomainWWW(o)),this._fireEvent(n,r)}async affiliateRedirect(e,t,n,r){return this._fireEvent("affiliate_redirect",{hash:e,type:t,status:n,target_domain:r})}async install(e,t,n){return this._fireEvent("install",{utm_source:e,utm_campaign:t,utm_medium:n})}async update(){return this._fireEvent("update")}async protectStart(e){return this._fireEvent(this.events.protectStart,e)}async protectChecked(e){return this._fireEvent(this.events.protectChecked,e)}}({debug:qe}),We="franceverif.fr",Ke=`${t.API_URL}.${We}`,Je=`${t.ANALYTIC_URL}.${We}`,Ye=`${t.CLICK_STREAM_URL}.${We}`,Xe=`${t.ONBOARDING_URL}.${We}`,{SITE_URL:Qe}=t,Ze=`${Qe}/`,et=`${Qe}/fr/protect/register`,tt=`${Ke}/out/extension/uninstalls`,nt=`${Qe}/redirect`,rt=`${Qe}/dashboard`,ot=/^(chrome|about|edge):(\/\/)?(newtab|startpageshared|extensions|history|about|accessibility|whats-new|webrtc-logs|webrtc-internals|web-app-internals|version|user-actions|usb-internals|ukm|translate-internals|tracing|topics-internals|terms|system|downloads|inspect|policy|help|bookmarks|settings)(\/)?/;__webpack_require__(2702).polyfill();const it=__webpack_require__(4301),st=__webpack_require__(4139)(it);const at=new class GlobalAPI{constructor({host:e=Ke,analyticHost:n=Je}={}){this.host=e,this.analyticHost=n,this.controllers={},this._token=null,this._platform=`ext${utils_capitalizeFirstLetter(t.BROWSER.toLowerCase())}`,this.retryWithAuth=async function retryWithAuth(e,t){return e(t)},this.requestMiddleware=async function requestMiddleware(e){const t=(null==e?void 0:e.status)||600;let n,r={status:t,code:t,error:!(t>=200&&t<=299)};try{n=await e.text()}catch(t){n=e}try{if(n){const e=JSON.parse(n);null!=e&&e.status&&(e.stat=e.status),r={...e,...r}}}catch(e){r={...r,errString:e.message,errData:String(n)}}return r},this.globalFetch=async function globalFetch(e,n={}){const{controller:r=null,headers:o={},timeout:i=12e4,...s}=n;if(!this.token){const{token:e=null}=await _.get([_.keys.TOKEN]);this.token=e}let a=null;if(r){const e=new AbortController;this.controllers[r]=e,s.signal=e.signal,a=setTimeout((()=>e.abort()),i)}const c={"Content-Type":"application/json","ad-ext-version":t.VERSION,"ad-client-type":this._platform,retryOn:[500],retries:3,authorization:`Bearer ${this.token}`,...o};let u;try{u=await st(e,{...s,headers:c})}catch(e){u="AbortError"===e.name||"TimeoutError"===e.name?e.name:e.message}delete this.controllers[r],clearTimeout(a);const l=await this.requestMiddleware(u);if(l.error){const t={fetchUrl:e,fetchMethod:(null==s?void 0:s.method)||"GET",fetchBody:s.body,fetchHeaders:JSON.stringify(c),fetchStatus:String((null==l?void 0:l.status)||(null==l?void 0:l.code)),fetchResponse:JSON.stringify(l)},n=e.split("?")[0].split("#")[0].split("/");sentry_captureExceptionSentry(l,{title:`HTTP Request To "/${n[n.length-1]}" Failed With Status ${l.code}`,extra:t})}return l}}abortRequest(e){const t=this.controllers[e];t&&(null==t||t.abort(),delete this.controllers[e])}get token(){return this._token}set token(e){this._token=e}get platform(){return this._platform}set platform(e){this._platform=e}async fireEvent(e,t={}){const n=`${this.analyticHost}${e}`;return this.globalFetch(n,t)}async fetch(e,t={}){const n=`${this.host}${e}`;return this.globalFetch(n,t)}async fetchTest(e,t={}){const n=`https://franceverif-dev.franceverif.fr${e}`;return this.globalFetch(n,t)}};const ct={...{couponsAndBonPlans:async function couponsAndBonPlans(e,t=!1){let n=`/shop/offers?domain=${e}&withFootprints=true`;return t&&(n+="&withNonTrusted=true"),at.fetch(n,{controller:"couponsAndBonPlans"})}},...{checkUrlQueue:async function checkUrlQueue(e,t="manual"){return at.fetch("/eden/check-url/queue",{method:"POST",controller:"checkUrlQueue",body:JSON.stringify({url:e,trigger:t})})},checkUrlCache:async function checkUrlCache(e){return at.fetch("/eden/check-url/cache",{method:"POST",controller:"checkUrlCache",body:JSON.stringify({url:e}),headers:{"ad-client-type":"website"}})},checkMatchedQueue:async function checkMatchedQueue(e){return at.fetch("/price-comparison/queue",{method:"POST",controller:"checkMatchedQueue",body:JSON.stringify(e)})},checkMatchedCache:async function checkMatchedCache(e){return at.fetch("/price-comparison/cache",{method:"POST",controller:"checkMatchedCache",body:JSON.stringify(e)})}},...{xpathErrorNotifications:async function xpathErrorNotifications(e){return at.fetch("/domains/error-statistic",{method:"POST",controller:"xpathErrorNotifications",body:JSON.stringify({text:e})})},getNotificationsAndAffiliateLink:async function getNotificationsAndAffiliateLink(e){const t=encodeURIComponent(e);return at.fetch(`/domains/additional-info?domain=${t}`,{retries:2,retryDelay:3e3,timeout:5e3,retryOn:[502,500,400,401,404,409],method:"GET",controller:"getNotificationsAndAffiliateLink"})},getProductFootprints:async function getProductFootprints(e){return at.fetch(`/domains/url-footprints?domain=${e}`,{method:"GET",controller:"getProductFootprints"})},getDomainOptions:async function getDomainOptions(e){return at.fetch(`/domains/${e}/rules`,{method:"GET",controller:"getDomainOptions"})},postWebSiteInfo:async function postWebSiteInfo(e){return at.fetch("/domains/web-site-statistic",{method:"POST",controller:"postWebSiteInfo",body:JSON.stringify(e)})},checkUserIsTop:async function checkUserIsTop(e){return at.fetch("/domains/top-user",{method:"POST",controller:"checkUserIsTop",body:JSON.stringify(e)})},checkPromotionTargetUser:async function checkPromotionTargetUser(){return at.fetch("/domains/promotion-target",{method:"GET",controller:"checkPromotionTargetUser"})},checkDomainOptions:async function checkDomainOptions(){return at.fetchTest("/api/get-table-data",{method:"GET",controller:"checkDomainOptions"})}},...{getUserMeProfile:async function getUserMeProfile(e){const t={method:"GET",controller:"getUserMeProfile"};return e&&(t.headers={authorization:`Bearer ${e}`}),at.fetch("/users/me",t)},getUserSubscriptions:async function getUserSubscriptions(e){const t={method:"GET",controller:"getUserSubscriptions"};return e&&(t.headers={authorization:`Bearer ${e}`}),at.fetch("/users/me/protect/subscriptions/current",t)}},...{saveUuid:async function saveUuid(e){const t=await at.fetch("/users/me/device",{method:"POST",controller:"saveUuid",headers:{"website-ssr":"enabled"},body:JSON.stringify(e)});return t.status||t.code},updateDevice:async function updateDevice(e){const t=await at.fetch("/users/me/device",{method:"PUT",controller:"updateDevice",body:JSON.stringify(e)});return t.status||t.code},getWebSiteInfo:async function getWebSiteInfo(e){return at.fetch(`/product-data/parse-rules?domain=${e}`,{method:"GET",controller:"getWebSiteInfo"})},sendAnonimUid:async e=>{const t=await at.fetch("/users/anonymous-uid",{method:"POST",controller:"sendAnonimUid",body:JSON.stringify(e)});return t.status||t.code},checkUrl:async function OthersAPI_checkUrl(e){return at.fetch("/check-url",{retries:2,retryDelay:6e4,retryOn:[502],method:"POST",controller:"checkUrl",body:JSON.stringify({url:e,checkEcommerce:!1})})}},...{sendHistory:async function sendHistory(e){return at.fetch("/protect/browser-history",{method:"POST",controller:"sendHistory",body:JSON.stringify(e)})},toggleNotification:async function toggleNotification(e){return at.fetch("/protect/popup/notified-statuses",{method:"POST",controller:"putExtensions",body:JSON.stringify(e)})},sendProtectUUID:async function sendProtectUUID(e){const t=await at.fetch("/protect/device-info",{method:"POST",controller:"sendNotifications",body:JSON.stringify({uuid:e})});return 204===t.status||409===t.status},postExtensions:async function postExtensions(e){return at.fetch("/protect/extensions",{method:"POST",controller:"postExtensions",body:JSON.stringify(e)})},putExtensions:async function putExtensions(e){return at.fetch("/protect/extensions",{method:"PUT",controller:"putExtensions",body:JSON.stringify(e)})},deleteExtensions:async function deleteExtensions(e){return at.fetch("/protect/extensions",{method:"DELETE",controller:"deleteExtensions",body:JSON.stringify(e)})},sendNotifications:async function sendNotifications(e){return at.fetch("/protect/popup/notified-domains",{method:"POST",controller:"sendNotifications",body:JSON.stringify(e)})},sendInstallDate:async function sendInstallDate(e){const t=await at.fetch("/users/me/device/install",{method:"PUT",controller:"sendInstallDate",body:JSON.stringify(e)});return 204===t.status||409===t.status}},...{sendUeaDetails:async function sendUeaDetails(e){return at.fireEvent("/uae-details",{method:"POST",controller:"sendUeaDetails",body:JSON.stringify(e)})}}};const ut=new class firstPartyTracking_FirstPartyTracking{constructor(){this._extensionVersion=t.VERSION,this._deviceType="desktop",this._eventSource="extension",this._uuid=null,this._userUuid=null,this._utmSource=null,this._utmMedium=null,this._utmCampaign=null}async _getOrCreateUUID(){if(this._uuid)return this._uuid;const{uuid:e}=await _.get([_.keys.UUID]);return e?(this._uuid=e,e):null}async _getOrCreateUserUUID(){var e;if(this._userUuid)return this._userUuid;const{user:t={}}=await _.get([_.keys.USER]),n=(null==t||null===(e=t.profile)||void 0===e?void 0:e.publicId)||null;return this._anonimUUID=n,n}async _getUtmData(){if(this._utmSource&&this._utmMedium&&this._utmCampaign)return{utmSource:this._utmSource,utmMedium:this._utmMedium,utmCampaign:this._utmCampaign};const{utm_source:e,utm_medium:t,utm_campaign:n}=await _.get([_.keys.UTM_SOURCE,_.keys.UTM_MEDIUM,_.keys.UTM_CAMPAIGN]);return this._utmSource=e,this._utmMedium=t,this._utmCampaign=n,{utmSource:e,utmMedium:t,utmCampaign:n}}async _fireEvent(e,t={}){const{toaster:n,screen_name:r,...o}=t,i=(new Date).toISOString()||null,s=r||n||null,a={...o,extensionVersion:this._extensionVersion},{utmSource:c=null,utmMedium:u=null,utmCampaign:l=null}=await this._getUtmData(),d=await this._getOrCreateUUID(),p=await this._getOrCreateUserUUID(),{user:f}=await _.get([_.keys.USER]),h=(null==f?void 0:f.isAuth)||!1,{subscription_status:m}=await getUserSubscription("free"),g=["trial","paid","free"].includes(m)?m:"free",y={time:i,eventName:e,uuid:d,userUuid:p,eventSource:this._eventSource,eventRoute:s,eventValue:JSON.stringify(a),deviceType:this._deviceType,paymentStatus:g,isAnonymous:h,utmSource:c,utmMedium:u,utmCampaign:l},v=Object.keys(y).reduce(((e,t)=>y[t]?{...e,[t]:y[t]}:e),{});await ct.sendUeaDetails(v)}async sendEvent(e,t=null){const{event:n,...r}=(null==e?void 0:e.data)||{};let o=(null==r?void 0:r.url)||null;if(!o&&(t&&(o=(null==t?void 0:t.url)||null),!o)){const e=await getActiveTab();o=(null==e?void 0:e.url)||null}return o&&(r.url=o,r.target_domain=getDomainWWW(o)),this._fireEvent(n,r)}async affiliateRedirect(e,t,n,r){return this._fireEvent(ze.affiliateRedirect,{hash:e,type:t,status:n,target_domain:r})}async cookieStatistics(e){return this._fireEvent(ze.cookieStatistics,e)}async install(e,t,n){return this._fireEvent(ze.install,{utm_source:e,utm_campaign:t,utm_medium:n})}async update(){return this._fireEvent(ze.update)}async protectStart(e){return this._fireEvent(ze.protectStart,e)}async protectChecked(e){return this._fireEvent(ze.protectStart,e)}},sendMessageToBg=e=>new Promise((t=>{callBrowser().runtime.sendMessage(e,(e=>{callBrowser().runtime.lastError;t(e)}))})),sendMessageToCt=(e,t,n=!1)=>new Promise((r=>{t||r(null);let o=n?0:3;const i=function setIntervalImmediately(e,t){return e(),setInterval(e,t)}((()=>{callBrowser().tabs.sendMessage(t,e,(e=>{const t=callBrowser().runtime.lastError;if(!(t&&o<=3))return clearInterval(i),t&&r(null),r(e),!0;o+=1}))}),300)}));async function setUninstallUrl(){const{clientId:e,uuid:t}=await _.get([_.keys.CLIENT_ID,_.keys.UUID]),n={aid:t,cid:e},r=await getUserUUID();r&&(n.did=r);const o=objectToQuery(n),i=`${tt}?${o}`;callBrowser().runtime.setUninstallURL(i)}const lt=6e4,dt=36e5,pt="PROD"!==t.API_ENV;async function sendAnonimUid_sendAnonimUid(e=!1){const{isSendingAnonimUid:t}=await _.get([_.keys.IS_SENDING_ANONIM_UID]);if(t)return;let n=pt?1e4:0;e&&(n=function getDelayBeforeSending(){const e=pt?3*lt:24*dt;return Math.random()*e}()),setTimeout((async()=>{const{uuid:e,savedUid:t={},installDate:n,utm_source:r,utm_medium:o,utm_campaign:i}=await _.get([_.keys.UUID,_.keys.SAVED_UUID,_.keys.IS_SENDING_ANONIM_UID,_.keys.INSTALL_DATE,_.keys.UTM_SOURCE,_.keys.UTM_MEDIUM,_.keys.UTM_CAMPAIGN]),s=function getSavedUidList(e){const t=Object.keys(e);return null!=t&&t.length?t.reduce(((t,n)=>{const r=e[n],{uuid:o}=r;return t.push(o),t}),[]):[]}(t),a={anonymousUid:e,uids:s,utmSource:r,utmMedium:i,utmCampaign:o,installedAt:new Date(n).toISOString()};204===await ct.sendAnonimUid(a)&&_.set({[_.keys.IS_SENDING_ANONIM_UID]:!0})}),n)}const ft={CHROME:"mhkejggchhilmabpicojddgaahkkgoln",OPERA:"addons.opera.com/extensions/details/franceverif",EDGE:"microsoftedge.microsoft.com/addons/detail/franceverif",FIREFOX:"firefox/addon/franceverif",SAFARI:"apps.apple.com/app/franceverif-anti-arnaque"};let ht=!1;const scripts_fireInstallEvent=async()=>{const e={utm_source:"organic",utm_campaign:"none",utm_medium:"",onboarding:!0},n=Date.now();await _.clear(),_.set({[_.keys.INSTALL_DATE]:n}),callBrowser().tabs.query({},(async r=>{r.forEach((n=>{const r=ft[t.BROWSER];if(n.url.includes(r)&&!ht){const t=(o=n.url,[...new URLSearchParams(o.split("?")[1])].reduce(((e,[t,n])=>(e[t]=n,e)),{}));ht=!0,t.utm_source&&(e.utm_source=t.utm_source),t.utm_campaign&&(e.utm_campaign=t.utm_campaign),t.utm_medium&&(e.utm_medium=t.utm_medium),"0"===String(t.onboarding)&&(e.onboarding=!1)}var o}));const o={[_.keys.INSTALL_DATE]:n,[_.keys.UTM_SOURCE]:e.utm_source,[_.keys.UTM_CAMPAIGN]:e.utm_campaign,[_.keys.UTM_MEDIUM]:e.utm_medium};await _.set(o);const i=setInterval((async()=>{const{uuid:e}=await _.get([_.keys.UUID]);e&&(await sendAnonimUid_sendAnonimUid(),await setUninstallUrl(),clearInterval(i))}),500);!function setInstallUrl(e){const t=objectToQuery({ext_install:1});let n=e?et:Ze;n=`${n}?${t}`,callBrowser().tabs.create({url:n})}(e.onboarding),await Ve.install(e.utm_source,e.utm_campaign,e.utm_medium)}))},sentInstallDateToAllDevice=async()=>{const e=await(async()=>{const{savedUid:e={}}=await _.get([_.keys.SAVED_UUID]),t=Object.keys(e);return 0===t.length?{}:t.reduce(((t,n)=>{const r=e[n],{isSavedInstallDate:o=!1,isSent:i=!1}=r;return!o&&i&&(t[n]=r),t}),{})})(),t=Object.keys(e);if(!t.length)return;const{installDate:n=0}=await _.get([_.keys.INSTALL_DATE]);for await(const r of t){const{uuid:t}=e[r],o=await ct.sendInstallDate({installedAt:new Date(n).toISOString(),uid:t});e[r].isSavedInstallDate=o}_.set({[_.keys.SAVED_UUID]:e})},scripts_fireUpdateEvent=async()=>{await setUninstallUrl(),await Ve.update(),sentInstallDateToAllDevice(),sendAnonimUid_sendAnonimUid(!0)},handlers_onInstall=e=>{"install"!==e.reason?"update"===e.reason&&scripts_fireUpdateEvent():scripts_fireInstallEvent()},mt="@BG_SEND_UUID",gt="@BG_RESET_CASHED_DATA",yt="@BG_SET_UNINSTALL_URL";function generateRandomId(e=8){let t="";const n="0123456789";for(let r=0;r<e;r++)t+=n.charAt(Math.floor(10*Math.random()));return Number(t)}const messageHandlers_checkUrlCache=async({sendResponse:e,data:t})=>{e(await ct.checkUrlCache(t.url))},messageHandlers_checkUrlQueue=async({api:e,sendResponse:t,data:n})=>{t(await e.checkUrlQueue(n.url,n.trigger))},vt="@CT_CHECK_COOKIE";__webpack_require__(2003),__webpack_require__(8518);function checkFootprint({url:e,footprint:t}){try{var n;return new RegExp(t,"g").test(e)||(null==e?void 0:e.includes(t))||(null==e||null===(n=e.replace(/www(\d+)?\./,""))||void 0===n?void 0:n.includes(t))}catch(n){var r;return(null==e?void 0:e.includes(t))||(null==e||null===(r=e.replace(/www(\d+)?\./,""))||void 0===r?void 0:r.includes(t))}}const _t=["^(http(s)?\\:\\/\\/)(www\\.)?gmail\\.com","^(http(s)?\\:\\/\\/)?(www\\.)?mail\\.google\\.com","^(http(s)?\\:\\/\\/)?(www\\.)?wanadoo\\.fr","^(http(s)?\\:\\/\\/)?.{0,}\\/webmail\\/","^(http(s)?\\:\\/\\/)?(www\\.)?messagerie\\.orange\\.fr","^(http(s)?\\:\\/\\/)?(www\\.)?webmail\\.sfr\\.fr","^(http(s)?\\:\\/\\/)?(www\\.)?hotmail\\.(fr|com)","^(http(s)?\\:\\/\\/)?(www\\.)?outlook\\.(fr|com)","^(http(s)?\\:\\/\\/)?(www\\.)?live\\.(fr|com)","^(http(s)?\\:\\/\\/)?(www\\.)?microsoft\\.(fr|com)"],Et=60,bt=1440,St={DOMAIN_CACHE:360,DOMAIN_OPTIONS:360,DOMAIN_OFFERS:360,TOP_USER:360,PROMOTION_TARGET_USER:1440,FOOTPRINTS:360,YAMLS:360,COOKIE_OPTIONS:180,USER:180,PRODUCT_PARSE:bt,TOASTERS:bt,ALERTS_DEFAULT:525600,ALERTS_MEDIUM:4320,ALERTS_SHORT:180,AFFILIATE_ACTIVATED:bt,SEND_NOTIFICATIONS:bt,EBAY_EXCEPTION:Et,URLS_CHECK:bt},wt=60;async function countDaysVisited(){const{full:e}=function getCurrentDate(e){let t;t=e?new Date(e):new Date;const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return{yyyy:n,mm:r,dd:o,full:`${n}-${r}-${o}`}}(),{daysVisited:t=[]}=await _.get([_.keys.DAYS_VISITED]);return!t.includes(e)&&t.length<wt&&(t.push(e),_.set({[_.keys.DAYS_VISITED]:t})),t.length}function clearPrevStorageData_clearPrevStorageData(e,t=[]){if(!checkIsObject(e))return{};const n=Object.keys(e);let r={};if(null==n||!n.length)return r;return r={...n.reduce(((n,r)=>{var o;const i=t.includes(r);return((null===(o=e[r])||void 0===o?void 0:o.expire)>(new Date).getTime()||i)&&(n[r]=e[r]),null!=t&&t.length,n}),{})},r}const getSavedAutoOpenAlert=async e=>{if(!e)return!1;try{const{alerts:t={}}=await _.get([_.keys.ALERTS]),n=(null==t?void 0:t[e])||null,r=(new Date).getTime();return!n||(null==n?void 0:n.expire)<r}catch(e){return sentry_captureExceptionSentry(e),!1}},setAutoOpenAlert=async(e,t=St.ALERTS_SHORT)=>{if(e)try{const{alerts:n={}}=await _.get([_.keys.ALERTS]),r=(null==n?void 0:n[e])||null,o=utils_addMinutes(new Date,t).getTime();(!r||(null==r?void 0:r.expire)<o)&&(n[e]={expire:o}),await _.set({[_.keys.ALERTS]:n})}catch(e){sentry_captureExceptionSentry(e)}};async function getSomeSavedAutoAlerts(e){if(!Array.isArray(e))return;const t={};for await(const n of e){const e=await getSavedAutoOpenAlert(n);t[`isNeedOpen${utils_capitalizeFirstLetter(n)}Toaster`]=e}return t}const checkIsPromotionTargetUser=async()=>{try{const{promotionTargetUserInfo:e}=await _.get([_.keys.PROMOTION_TARGET_USER_INFO]),t=(e=>{const t=(null==e?void 0:e.expire)<=(new Date).getTime();return!checkIsObject(e)||t?null:e})(e);if(t)return(null==t?void 0:t.isPromotionTarget)||!1;const n=await(async()=>{const e=utils_addMinutes(new Date,St.PROMOTION_TARGET_USER).getTime(),{user:t}=await _.get([_.keys.USER]);if(null==t||!t.isAuth)return{isPromotionTarget:!1,expire:e};try{const t=await ct.checkPromotionTargetUser();if(t.code<=201){const{code:n,...r}=t;return{...r,expire:e}}return{isPromotionTarget:!1,expire:e}}catch(t){return sentry_captureExceptionSentry(t),{isPromotionTarget:!1,expire:e}}})();return _.set({[_.keys.PROMOTION_TARGET_USER_INFO]:n}),(null==n?void 0:n.isPromotionTarget)||!1}catch(e){return sentry_captureExceptionSentry(e),!1}},xt=17013816e5;async function getAlert({url:e,isDangerousDomain:t,subscriptions:n={}}){const r=n.isActive?null==n?void 0:n.type:null;if("trial"===r||"paid"===r)return null;const{alerts:o={}}=await _.get([_.keys.ALERTS]),g=(null==o?void 0:o.promotionTargetUserSecond)||null;let{isNeedOpenPromotionTargetUserToaster:y,isNeedOpenPromotionTargetUserSecondToaster:v}=await getSomeSavedAutoAlerts(["promotionTargetUser","promotionTargetUserSecond"]);g||(v=!1,await setAutoOpenAlert("promotionTargetUserSecond",St.ALERTS_MEDIUM));let E=!1;(y||v)&&(E=await checkIsPromotionTargetUser());const{installDate:b=0}=await _.get([_.keys.INSTALL_DATE]);if(b<xt&&E)return null;const{isAfterDay1:S=!1,isAfterDay5:w=!1,isAfterDay13:x=!1,isAfterDay14:T=!1,isAfterDay15:O=!1}=await async function checkAfterDay(e=[]){const t=[...e].sort(((e,t)=>t-e)),n=await countDaysVisited(),r=t.reduce(((e,t)=>({...e,[`isAfterDay${t}`]:!1})),{});for(const e of t)if(n===e+1){r[`isAfterDay${e}`]=!0;break}return r}([1,5,13,14,15]),k=await getSomeSavedAutoAlerts(["afterDay1","afterDay5","afterDay5Second","afterDay13","afterDay13Second","afterDay14","afterDay14Second","afterDay14Third","afterDay15"]),{isNeedOpenAfterDay1Toaster:I,isNeedOpenAfterDay5Toaster:A,isNeedOpenAfterDay5SecondToaster:C,isNeedOpenAfterDay13Toaster:D,isNeedOpenAfterDay13SecondToaster:R,isNeedOpenAfterDay14Toaster:U,isNeedOpenAfterDay14SecondToaster:P,isNeedOpenAfterDay14ThirdToaster:N,isNeedOpenAfterDay15Toaster:F}=k,M=null==_t?void 0:_t.some((t=>checkFootprint({url:e,footprint:t})));if(E){if(M&&y)return i;if(v)return s}if(S&&I&&I)return a;if(w){if(M&&A)return c;if(C)return u}if(x){if(D)return l;if(R)return d}if(T){if(M&&U)return p;if(t&&P)return f;if(t&&N)return h}return O&&F&&M?m:null}const Tt={},Ot=["amazon.fr","ebay.fr","fnac.com","cdiscount.fr","cdiscount.com","manomano.fr","backmarket.fr"],scripts_pocuxScript=async({tab:e,data:t={},check:n=!1})=>{const{url:r="",type:o}=t;if(!checkUrl(r)&&!n)return!1;const{id:i,url:s,status:a,title:c}=e,u=Tt[i];if(u){const{hash:t,type:n,domain:r,affiliateLink:o,startCookie:l,checkedCookie:d,isNeedCheckCookie:p}=u,f=checkExclusionAffiliateLinkType(n);if("complete"===a&&getDomain(s)!==We&&"franceverif-dev.franceverif.fr"!==getDomain(s)){const a=c.includes("blocked")||s.includes("chrome-extension://")||s.includes("moz-extension://");if(Ve.affiliateRedirect(t,n,a?"blocked":"complete",r),!d&&p){u.checkedCookie=!0,u.isNeedCheckCookie=!1;const{allCookies:n}=await sendMessageToCt({event:vt},e.id),i={isBlocked:a,domain:r,affiliateLink:o,hash:t,startCookie:l,endCookie:n};ut.cookieStatistics(i)}setTimeout((()=>{f||callBrowser().tabs.remove(i,(()=>{callBrowser().runtime.lastError})),delete Tt[i]}),500)}return{isAffiliateRedirectTab:!f,isDisabledAutoOpenToaster:f}}if(!n){const t=new URL(r),n=encodeURIComponent(t.href),i=objectToQuery({url:n}),a=`${nt}/?${i}`,c=checkExclusionAffiliateLinkType(o),u=t.pathname.split("/"),l=u[u.length-1],d=getDomainWWW(s),p=await(async e=>{const{installDate:t}=await _.get([_.keys.INSTALL_DATE]),n=t>=xt,r=Ot.some((t=>e.includes(t)));return!(!n||!r)})(d),f={affiliateLink:n,isNeedCheckCookie:!1,checkedCookie:!1,startCookie:null};if(p){const{allCookies:t}=await sendMessageToCt({event:vt},e.tab.id);f.isNeedCheckCookie=!0,f.startCookie=t}return callBrowser().tabs.create({active:c,url:a},(e=>{callBrowser().runtime.lastError;Tt[e.id]={domain:d,hash:l,type:o,...f}})),{isAffiliateRedirectTab:!1,isDisabledAutoClose:!1}}return{isAffiliateRedirectTab:!1,isDisabledAutoClose:!1}},checkOffers=async e=>{try{var t;const{offersCache:n={}}=await _.get([_.keys.CACHE_OFFERS]),r=clearPrevStorageData_clearPrevStorageData(n),o=null!==(t=r[e])&&void 0!==t?t:null;if(o)return{status:!0,data:o};const i=await(async e=>{try{const n=await ct.couponsAndBonPlans(e);if(n.code<=201){var t;const{code:e,...r}=n,o=(null==r?void 0:r.allOffers)||[],i=null==o?void 0:o.filter((e=>e.code&&"bon_plan"!==e.type)),s=(null==r||null===(t=r.cashback)||void 0===t?void 0:t.filter((e=>e.anonymousLink)))||[];return{...r,allOffers:i,cashback:s,expire:utils_addMinutes(new Date,St.DOMAIN_OFFERS).getTime()}}if((null==n?void 0:n.code)>=400||null!=n&&n.error)return{isError:!0,expire:utils_addMinutes(new Date,St.DOMAIN_OFFERS).getTime()}}catch(e){return sentry_captureExceptionSentry(e),{isError:!0,expire:utils_addMinutes(new Date,St.DOMAIN_OFFERS).getTime()}}})(e),s={...r,[e]:i};return _.set({[_.keys.CACHE_OFFERS]:s}),{status:!0,data:i||{}}}catch(e){return sentry_captureExceptionSentry(e),{status:!0,data:{}}}},getIsTopUser=async e=>{const t=utils_addMinutes(new Date,St.TOP_USER).getTime();try{const n=await(async e=>{const{user:t}=await _.get([_.keys.USER]),{uuid:n}=await _.get([_.keys.UUID]),{savedUid:r}=await _.get([_.keys.SAVED_UUID]),o={domain:e,anonymousUid:n};var i;return null!=t&&t.isAuth&&r[t.profile.email]&&(o.authorisedUid=null!==(i=r[t.profile.email].uuid)&&void 0!==i?i:null),o})(e),r=await ct.checkUserIsTop(n);if(r.code<=201){const{code:e,...n}=r;return{...n,expire:t}}return{isTopUser:!1,expire:t}}catch(e){return sentry_captureExceptionSentry(e),{isTopUser:!1,expire:t}}},checkIsTopUser=async e=>{try{const{topUserInfo:t={}}=await _.get([_.keys.TOP_USER_INFO]),n=clearPrevStorageData_clearPrevStorageData(t),r=(null==n?void 0:n[e])||null;if(r)return{status:!0,data:r||{}};at.abortRequest("checkUserIsTop");const o=await getIsTopUser(e),i={...n,[e]:o};return _.set({[_.keys.TOP_USER_INFO]:i}),{status:!0,data:o}}catch(e){return sentry_captureExceptionSentry(e),{status:!1,data:{}}}},resetCashedData=async({sendResponse:e,data:t})=>{const n=(null==t?void 0:t.domain)||null;if(!n)return;await _.remove([_.keys.CACHE_OFFERS,_.keys.TOP_USER_INFO]);const[r,o]=await Promise.all([checkOffers(n),checkIsTopUser(n)]);e({offers:r.data,topUserInfo:o.data})};let kt=!1;function getSubscriptions(e){const t={status:"expired",isActive:!1,endAt:null,startAt:null,type:null,plan:null};return(null==e?void 0:e.code)<=201?(t.endAt=getTime(null==e?void 0:e.endAt),t.startAt=getTime(null==e?void 0:e.startAt),t.status=(null==e?void 0:e.stat)||null,t.plan=(null==e?void 0:e.plan)||null,t.type=(null==e?void 0:e.type)||null,t.isActive="active"===(null==e?void 0:e.stat),t):t}const domainOptions_getDomainOptions=e=>new Promise((async t=>{try{const n=await ct.getDomainOptions(e),{code:r,path:o,...i}=n;if(r<=201)return void t({...i,isError:!1,expire:utils_addMinutes(new Date,St.DOMAIN_OPTIONS).getTime()});if(r>=400||null!=n&&n.error)return void t({expire:utils_addMinutes(new Date,St.DOMAIN_OPTIONS).getTime(),isError:!0})}catch(e){sentry_captureExceptionSentry(e),t({expire:utils_addMinutes(new Date,St.DOMAIN_OPTIONS).getTime(),isError:!0})}t({})})),checkNeedGetNewLinkBeforeApply=e=>{const t=getDomainWWW(e);return!!/^amazon\./g.test(t)};async function getAdditionInfo(e){return new Promise((async t=>{try{const n=await ct.getNotificationsAndAffiliateLink(e);if(200===n.code){const r=checkNeedGetNewLinkBeforeApply(e);return void t({needGetNewLinkBeforeApply:r,...n})}}catch(e){sentry_captureExceptionSentry(e)}t({})}))}async function domainOptions_checkDomainOptions({domain:e,url:t}){try{var n;const{domainOptions:r={}}=await _.get([_.keys.CACHE_DOMAIN_OPTIONS]),o=clearPrevStorageData_clearPrevStorageData(r),i=(null==o?void 0:o[e])||null;if(i)return{status:!0,data:i||{}};at.abortRequest("getDomainOptions");const[s,a]=await Promise.all([domainOptions_getDomainOptions(e),getAdditionInfo(t)]),c=!(null==a||!a.affiliateLink)||!1,u=!(null==s||null===(n=s.feature)||void 0===n||!n.featureCashbackSecurityAccount),l={...s,hasSecurityAffiliate:c,uniqueIdFriendly:u,additionInfo:a},d={...o,[e]:l};return _.set({[_.keys.CACHE_DOMAIN_OPTIONS]:d}),{status:!0,data:l}}catch(e){return sentry_captureExceptionSentry(e),{status:!0,data:{}}}}const It={contentSettings:"contentSettings",management:"management",history:"history"},At=[It.contentSettings,It.management,It.history];const Ct={check:function check({permissions:e=At}){return new Promise((t=>{callBrowser().permissions.contains({permissions:e},(e=>{t(e)}))}))},set:function permission_set({permissions:e=At}){return new Promise((t=>{callBrowser().permissions.request({permissions:e},(e=>{t(e)}))}))},remove:function permission_remove({permissions:e=At,onSuccess:t,onError:n}){callBrowser().permissions.remove({permissions:e},(e=>{e&&t?t():n&&n()}))},keys:It},Dt=Ct,Rt={"@BG_CHECK_URL_CACHE":messageHandlers_checkUrlCache,"@BG_CHECK_URL_QUEUE":messageHandlers_checkUrlQueue,"@BG_INIT_POCUX":scripts_pocuxScript,"@BG_GET_USER_PROFILE":async({sendResponse:e,data:t={}})=>{const{token:n}=t,[r,o]=await Promise.all([ct.getUserMeProfile(n),ct.getUserSubscriptions(n)]);if((null==r?void 0:r.code)<=201){at.token=t.token;const e=await _.get([_.keys.TOKEN]);e.token!==n&&(_.set({[_.keys.OLD_TOKEN]:e.token}),_.set({[_.keys.TOKEN]:n}))}e({code:null==r?void 0:r.code,user:r,subscription:o})},[mt]:async({sendResponse:e,data:n})=>{const{os:r,browserVersion:o,language:i}=await getBrowserInfo(),{installDate:s=null,uuid:a}=await _.get([_.keys.INSTALL_DATE,_.keys.UUID]),c={os:r,language:i,browserVersion:o,clientPlatform:t.BROWSER.toLowerCase(),uid:null==n?void 0:n.uid,anonymousUid:a,clientType:"extension"};s&&(c.installedAt=new Date(s).toISOString());const u=await ct.saveUuid(c);409===u&&e({isRetry:!0,isSent:!1,browserInfo:null}),204!==u&&e({isRetry:!1,isSent:!1,browserInfo:null}),e({isRetry:!1,isSent:!0,browserInfo:c})},"@GET_WEB_SITE_INFO":async({sendResponse:e,data:t})=>{e(await ct.getWebSiteInfo(t.domain))},"@BG_GET_PRODUCT_FOOTPRINTS":async({sendResponse:e,data:t})=>{e(await ct.getProductFootprints(t.domain))},"@POST_WEB_SITE_INFO":async({sendResponse:e,data:t})=>{e(await ct.postWebSiteInfo(t.body))},"@BG_XPATH_ERROR_NOTIFICATIONS":async({data:e})=>{await ct.xpathErrorNotifications(e.message)},[gt]:resetCashedData,"@BG_GA_SEND_EVENT":({data:e,tab:t})=>{Ve.sendEvent(e,t)},[gt]:resetCashedData,"@BG_GET_EMAIL":function saveOnboardingEmail({data:e}){kt||(kt=!0,_.set({email:e.data}))},"@BG_CHECK_SUBSCRIPTION":async function checkSubscriptions({sendResponse:e}){const{user:t={}}=await _.get([_.keys.USER]),n={...t,subscriptions:getSubscriptions(await ct.getUserSubscriptions())};await _.set({[_.keys.USER]:n}),e({user:n})},[yt]:async function changeUninstallUrl(){await setUninstallUrl()},"@BG_GET_AFFILIATE_LINK":async({sendResponse:e,data:t})=>{const{url:n}=(null==t?void 0:t.data)||{};n||e(null);const r=getDomainWWW(n),o=await getAdditionInfo(n),i=(null==o?void 0:o.affiliateLink)||null;if(o){const{domainOptions:e={}}=await _.get([_.keys.CACHE_DOMAIN_OPTIONS]),t={...(null==e?void 0:e[r])||null,additionInfo:o},n={...e,[r]:t};await _.set({[_.keys.CACHE_DOMAIN_OPTIONS]:n})}e(i)},"@BG_UPDATE_BLOCK_RULES":async({sendResponse:e,data:t})=>{const{domain:n=null,isUpdate:r=!1}=t.data||{};if(!n)return void e(!1);const{cookieOptions:o={}}=await _.get([_.keys.COOKIE_OPTIONS]),i=o.domains[n]||null;if(!i)return void e(!1);const s=await callBrowser().declarativeNetRequest.getDynamicRules();if(!(s.length>0)&&r)return void e(!0);const a=((null==s?void 0:s.filter((e=>e.condition.initiatorDomains.includes(n))))||[]).map((e=>e.id)),c=(null==i?void 0:i.urlFilter.split("\n").filter((e=>e.length>0))).map((e=>({id:generateRandomId(),priority:1,action:{type:"block"},condition:{urlFilter:e.trim(),initiatorDomains:[n]}})));callBrowser().declarativeNetRequest.updateDynamicRules({removeRuleIds:a,addRules:c},(async()=>{if(callBrowser().runtime.lastError)e(!1);else{await callBrowser().declarativeNetRequest.getDynamicRules();e(!0)}}))},"@BG_LOGOUT_USER":({data:e})=>{ct.token=e.token}},handlers_onMessage=(e,t,n)=>{const{event:r=null,...o}=e||null;if(!r)return!0;const i=Rt[r];return!i||(i({api:ct,sendResponse:n,data:o,tab:t}),!0)},checkBrowserPage=(e="")=>ot.test(e),enabledIcon=()=>{callBrowserAction().setIcon({path:{16:"../icons/icon16.png",32:"../icons/icon32.png",48:"../icons/icon48.png",64:"../icons/icon64.png",128:"../icons/icon128.png"}})},disabledIcon=()=>{callBrowserAction().setIcon({path:{16:"../icons/gray16.png",32:"../icons/gray32.png",48:"../icons/gray48.png",64:"../icons/gray64.png",128:"../icons/gray128.png"}})},scripts_popupLogic=async e=>{var t,n;if(null==e||!e.id||null==e||!e.url)return;const r=await sendMessageToCt({event:"@CT_CHECK_INJECT"},null==e?void 0:e.id),o=(null==r?void 0:r.isInjectContext)||!1,i=checkBrowserPage(e.url),s=null==e||null===(t=e.url)||void 0===t?void 0:t.includes(Qe),a=null==e||null===(n=e.url)||void 0===n?void 0:n.includes(Xe);!o||i||s||a?disabledIcon():enabledIcon()},handlers_onActivated=e=>{setTimeout((()=>{callBrowser().tabs.get(e.tabId,(e=>{callBrowser().runtime.lastError;scripts_popupLogic(e)}))}),200)};const Ut={backgrounds:{main:"#FFFFFF",secondary:"rgba(11, 24, 74, 0.6)",secondary1:"#F6F6FA",tooltip:"#14131E",black:"#17161D"},textColor:{main:"#555269",title:"#1F380B",modalTitle:"#545269",alertTitle:"#17161D",accent:"#83C428",secondary1:"#C0BDD1",secondary2:"#14131E",description1:"#5D6C73",description2:"#74718A",description3:"#9996AE",description4:"#545269",description5:"#F5F5F5",description6:"#152252",description7:"#FFFFFF",description8:"#767389"},fonts:{fontFamily:"'PoppinsFV', sans-serif",H_05:"font-size: 32px; line-height: 38px;",H_07:"font-size: 28px; line-height: 34px;",H_10:"font-size: 24px; line-height: 29px;",H_15:"font-size: 21px; line-height: 29px;",H_16:"font-size: 20px; line-height: 27px;",H_17:"font-size: 19px; line-height: 23px",H_20:"font-size: 18px; line-height: 27px;",H_25:"font-size: 17px; line-height: 24px;",H_30:"font-size: 16px; line-height: 24px;",T_35:"font-size: 15px; line-height: 24px;",T_30:"font-size: 14px; line-height: 20px;",T_25:"font-size: 13px; line-height: 28px;",T_20:"font-size: 12px; line-height: 18px;",T_10:"font-size: 10px; line-height: 14px;"},badgeColor:{green:"#83C428",orange:"#FF9800",red:"#CA3F4B"},animation:{quick:"cubic-bezier(.04,1.57,.89,.83)"},browser:t.BROWSER},Pt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Nt;const Ft=new Uint8Array(16);function rng(){if(!Nt&&(Nt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nt(Ft)}const Mt=[];for(let e=0;e<256;++e)Mt.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return Mt[e[t+0]]+Mt[e[t+1]]+Mt[e[t+2]]+Mt[e[t+3]]+"-"+Mt[e[t+4]]+Mt[e[t+5]]+"-"+Mt[e[t+6]]+Mt[e[t+7]]+"-"+Mt[e[t+8]]+Mt[e[t+9]]+"-"+Mt[e[t+10]]+Mt[e[t+11]]+Mt[e[t+12]]+Mt[e[t+13]]+Mt[e[t+14]]+Mt[e[t+15]]}const jt=function v4(e,t,n){if(Pt.randomUUID&&!t&&!e)return Pt.randomUUID();const r=(e=e||{}).random||(e.rng||rng)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return unsafeStringify(r)};let Lt=[];const checkDomainColorOptions=e=>({domainColor:e,isGreenDomain:"GREEN"===e,isNonGreen:"ORANGE"===e||"RED"===e,isEmptyDomainColor:!e});const checkUserInfo=async()=>{try{var e,t;const{token:r,oldToken:o,user:i={}}=await _.get([_.keys.TOKEN,_.keys.OLD_TOKEN,_.keys.USER]);if(!r||"null"===r)return{};const s=(new Date).getTime(),a=((null==i?void 0:i.expired)||0)<s,c=((null==i||null===(e=i.subscriptions)||void 0===e?void 0:e.endAt)||s)<s,u=a||c;if(o&&(null==i||!i.isAuth)&&(null==i||null===(t=i.profile)||void 0===t||!t.email)||u){const[e,t]=await Promise.all([ct.getUserMeProfile(r),ct.getUserSubscriptions(r)]);if((null==e?void 0:e.code)<=201){var n;const r=null==i||null===(n=i.profile)||void 0===n?void 0:n.email;return r!==(null==e?void 0:e.email)&&await _.remove([_.keys.CACHE_OFFERS,_.keys.TOP_USER_INFO]),await(async({user:e={},subscription:t=[]})=>{const n=!(null==e||!e.email),r=utils_addMinutes(new Date,St.USER).getTime(),o={profile:function getUser(e){return{publicId:(null==e?void 0:e.publicId)||null,email:(null==e?void 0:e.email)||null,firstName:(null==e?void 0:e.firstName)||null,lastName:(null==e?void 0:e.lastName)||null,role:(null==e?void 0:e.role)||null,confirmEmail:(null==e?void 0:e.confirmEmail)||null,phone:(null==e?void 0:e.phone)||null,address:(null==e?void 0:e.address)||null,city:(null==e?void 0:e.city)||null,postCode:(null==e?void 0:e.postCode)||null,status:(null==e?void 0:e.status)||null,subscribes_categories_active:(null==e?void 0:e.subscribes_categories_active)||null,loading:(null==e?void 0:e.loading)||null,isExtInstalled:(null==e?void 0:e.isExtInstalled)||null,initEmail:(null==e?void 0:e.initEmail)||null,withFacebook:(null==e?void 0:e.withFacebook)||null,withGoogle:(null==e?void 0:e.withGoogle)||null}}(e),subscriptions:getSubscriptions(t),expired:r,isAuth:n};return await _.set({[_.keys.USER]:o}),o})({user:e,subscription:t})}return _.set({[_.keys.TOKEN]:o}),_.remove([_.keys.OLD_TOKEN,_.keys.USER]),{}}return i}catch(e){sentry_captureExceptionSentry(e)}},getCacheDomain=async e=>{const t=utils_addMinutes(new Date,St.DOMAIN_CACHE).getTime();try{const n=await ct.checkUrlCache(e),{code:r,data:o={},isDomainCacheExpired:i=!0}=n;if(checkIsObject(o)&&(o.isDomainCacheExpired=i),r<=201){return{data:o||null,expire:t}}return{data:null,expire:t}}catch(e){return sentry_captureExceptionSentry(e),{data:null,expire:t}}};async function checkCacheDomain(e){try{const{cacheDomains:t={}}=await _.get([_.keys.CACHE_DOMAINS]),n=clearPrevStorageData_clearPrevStorageData(t),r=(null==n?void 0:n[e])||null;if(r)return{status:!!r,data:r.data};at.abortRequest("checkUrlCache");const o=await getCacheDomain(e),i={...n,[e]:o};return _.set({[_.keys.CACHE_DOMAINS]:i}),{status:!!o,data:o.data}}catch(e){return sentry_captureExceptionSentry(e),{status:!1,data:null}}}const getFootprints=async e=>{try{const t=await ct.getProductFootprints(e);if((null==t?void 0:t.code)<=201){const{code:e,...n}=t,r=[...(null==n?void 0:n.domainFootprints)||[],...(null==n?void 0:n.uniqueFootprints)||[]],o=(null==n?void 0:n.successPagesFootprints)||[];return{expire:utils_addMinutes(new Date,St.FOOTPRINTS).getTime(),regex:{productFootprints:r,successPagesFootprints:o}}}return{expire:utils_addMinutes(new Date,St.FOOTPRINTS).getTime(),isError:!0}}catch(e){return sentry_captureExceptionSentry(e),{expire:utils_addMinutes(new Date,St.FOOTPRINTS).getTime(),isError:!0}}};async function checkFootprints(e){try{const{footprintsList:t={}}=await _.get([_.keys.CACHE_FOOTPRINT_LIST]),n=clearPrevStorageData_clearPrevStorageData(t),r=(null==n?void 0:n[e])||null;if(r)return{status:!0,data:r||{}};const o=await getFootprints(e),i={...n,[e]:o};return _.set({[_.keys.CACHE_FOOTPRINT_LIST]:i}),{status:!0,data:o||{}}}catch(e){return sentry_captureExceptionSentry(e),{status:!0,data:{}}}}const checkAnimationFreeze=async e=>{const{animationFreeze:t={}}=await _.get([_.keys.ANIMATION_FREEZE]);return(null==t?void 0:t[e])||0},getCookieOptions=()=>new Promise((async e=>{const t=utils_addMinutes(new Date,St.COOKIE_OPTIONS).getTime();try{const n=await ct.checkDomainOptions(),{code:r,path:o,...i}=n;if(r<=201)return void e({...i,isError:!1,expire:t});if(r>=400||null!=n&&n.error)return void e({isError:!0,expire:t})}catch(n){sentry_captureExceptionSentry(n),e({isError:!0,expire:t})}e({})}));async function checkCookieOptions(e){try{var t,n;if(!checkCookieLogic())return null;let{cookieOptions:r={}}=await _.get([_.keys.COOKIE_OPTIONS]);((null===(t=r)||void 0===t?void 0:t.expire)||0)<Date.now()&&(r=await getCookieOptions(),_.set({[_.keys.COOKIE_OPTIONS]:r}));return(null===(n=r)||void 0===n||null===(n=n.domains)||void 0===n?void 0:n[e])||null}catch(e){return sentry_captureExceptionSentry(e),null}}const getSavedAffiliateActivated=async(e,t)=>{if(t)try{const{affiliateActivated:n={}}=await _.get([_.keys.AFFILIATE_ACTIVATED]),r=clearPrevStorageData_clearPrevStorageData((null==n?void 0:n[t])||{}),o={...n,[t]:r};_.set({[_.keys.AFFILIATE_ACTIVATED]:o});const i=(null==r?void 0:r[e])||null;return{status:!!i,data:i||{}}}catch(e){return{status:!1,data:{}}}};const getSavedAutoToaster=async(e,t)=>{if(!t)return!1;try{const{toasters:n={}}=await _.get([_.keys.TOASTERS]),r=clearPrevStorageData_clearPrevStorageData((null==n?void 0:n[t])||{}),o={...n,[t]:r};_.set({toasters:o});return!(null!=r&&r[e])}catch(e){return sentry_captureExceptionSentry(e),!1}};const $t=["^(http(s)?\\:\\/\\/)?[^\\/]+\\.checkout\\-x\\.com\\/f\\/[A-Z0-9]+\\/c\\/[A-Z0-9]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]*secure\\.squarespace\\.com\\/checkout\\?cartToken\\=[A-z0-9-]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]*checkout\\.bigcartel\\.com\\/[0-9]+\\/[A-Z0-9]+\\/(contact|shipping|payment)([\\.\\/\\-\\?\\&\\#]|$)"],Bt=["^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout(\\.php)?([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/index\\.php\\?dispatch\\=checkout\\.checkout([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/validation\\-commande([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/fr\\/commander([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\S+\\/(checkout|mon-panier)(/)?","^(http(s)?\\:\\/\\/)?[^\\/]+\\/validation\\-panier([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/fr\\/checkout\\/[0-9]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/fr\\/checkout\\/[0-9]+\\/order\\_information([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/[0-9]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/([a-z]{2})?\\/checkout\\/([a-zA-Z0-9\\/-]+|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/address([\\.\\/\\-\\?\\&\\#]|$)","\\/checkout\\/payment([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/[a-z]{2}\\/checkout([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/connexioncart([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/epages\\/[A-z0-z]+\\.sf\\/sec[0-9A-z]+?([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/paiement([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/catalogue\\?ctrl=checkout([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/hikashop\\-menu\\-for\\-module\\-[0-9]+\\/Paiement\\.html([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/panier\\-iggydodie\\/checkout\\.html([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/onepage([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/panier\\.html([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/(index\\.php)?\\?route\\=(quick)?checkout\\/checkout([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/commande([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/commande(\\/)?$","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\_shipping\\.php([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/index\\.php\\?main\\_page\\=checkout(\\_shipping)?([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/commande_livraison\\.php([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/PBSCOrderForm\\.asp([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/[a-z]{2}\\/order([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+(\\/[a-z]{2})?\\/commande([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/payer([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/apps\\/secure\\-checkout\\/[A-z0-9]+([\\.\\/\\-\\?\\&\\#]|$)","\\/commande\\-connexion([\\.\\/\\-\\?\\&\\#]|$)","\\/commande\\/identification([\\.\\/\\-\\?\\&\\#]|$)","\\/paiement\\/connexion([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/on\\/demandware\\.store\\/Sites\\-[\\w-]+\\-Site\\/fr\\_FR\\/SPCO\\-Start\\/shipping([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/on\\/demandware\\.store\\/Sites\\-[\\w-]+\\-Site\\/fr\\_FR\\/COCheckout\\-Show([\\.\\/\\-\\?\\&\\#]|$)","\\/reglement\\/livraison([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/multi\\/purchase\\-infos\\/register([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/contents\\/[a-z]{2}\\/basket\\.html([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/a\\/checkout\\/f\\/[A-Z0-9]+\\/c\\/[A-Z0-9]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/[0-9]+\\/checkouts\\/[A-z0-9]+\\?([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/[0-9]+\\/checkouts\\/[A-z0-9]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkouts\\/[A-z0-9]+([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/shippingPayment([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/confirm([\\.\\/\\-\\?\\&\\#]|$)","\\/checkout\\/address([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/order\\/delivery([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/panier\\/checkout([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/panier\\.html([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/cart\\/checkout([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+(\\/[a-z-]{2,5})?\\/cart(\\/)?$","^(http(s)?\\:\\/\\/)?[^\\/]+\\/contenu\\-du\\-painer([\\.\\/\\-\\?\\&\\#]|$)","\\/cart\\/orderdone([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/component\\/virtuemart\\/cart([\\.\\/\\-\\?\\&\\#]|$)","\\/cart\\/check\\.html([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/choix\\_mode\\_paiement\\.php([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/paiement([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/commander([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/caisse([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\-2([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/(b|B)asket.html","^(http(s)?\\:\\/\\/)?[^\\/]+\\/index\\.php\\?main\\_page\\=checkout\\_shipping([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/shoppingbasket\\/basket\\.aspx([\\.\\/\\-\\?\\&\\#]|$)","^(http(s)?\\:\\/\\/)?[^\\/]+\\/checkout\\/basket(#)?\\/basket$","^(http(s)?\\:\\/\\/)?[^\\/]+(www.)?(neoness.fr)+\\/subscription\\/informations$"],Ht=["http(s)?:\\/\\/(www\\.|\\/\\/)amazon(\\.[a-z]{2,3}){1,2}\\/(.*\\/)?gp\\/cart\\/view\\.html"],getPageTypeOptions=e=>({pageType:e,isProductPage:"product"===e,isCheckoutPage:"checkout"===e}),checkPageType=({url:e,productFootprints:t,checkoutFootprints:n})=>{const r=((e,t)=>{let n=!1;try{n=null==t?void 0:t.some((t=>checkFootprint({url:e,footprint:t}))),n||(n=null==Ht?void 0:Ht.some((t=>checkFootprint({url:e,footprint:t}))))}catch(e){sentry_captureExceptionSentry(e)}return n})(e,t);if(r)return getPageTypeOptions("product");const o=((e,t)=>!!(null==t?void 0:t.find((({footprint:t})=>checkFootprint({footprint:t,url:e})))))(e,n),i=getDomainWWW(e),s=new RegExp(`^.*${i}`),a=e.replace(s,""),c=(e=>{let t=null==$t?void 0:$t.some((t=>checkFootprint({url:e,footprint:t})));return t||(t=null==Bt?void 0:Bt.some((t=>checkFootprint({url:e,footprint:t}))),t)})(a),u=(e=>{const t=e.split("?")[0];return/(cart|checkout|panier)/g.test(t)})(a);return getPageTypeOptions(o||c||u?"checkout":"home")},checkPartnerExclusion=e=>!!/(fnacdarty|fnacspectacles|sephora|decathlon)\.(com|fr)/g.test(e),checkAmazonExclusion=e=>!!/^amazon\./g.test(e),checkEbayWidthQuery=async e=>{if(!/ebay\.\w*/g.test(e))return!1;const{isExceptionsEbay:t=null}=await _.get([_.keys.EBAY_EXCEPTION]);if(t&&t>(new Date).getTime())return!0;const n=/\bcampaignid=.*\b/g.test(e),r=/\bcampid=.*\b/g.test(e),o=/\bmkcid=.*\b/g.test(e),i=/\bmkevt=.*\b/g.test(e);if(!(r||o||i||n))return!1;const s={[_.keys.EBAY_EXCEPTION]:utils_addMinutes(new Date,St.EBAY_EXCEPTION).getTime()};return _.set(s),!0};async function getPayloadData(e){var o,i,s;const{domain:a,user:c,domainCache:u,domainOption:l,footprints:d,offers:p,topUserInfo:f,animationFreeze:h,cookieOptions:m}=await async function getData(e){const t=getDomainWWW(e),[n,r,o,i,s,a,c,u]=await Promise.all([checkUserInfo(),checkCacheDomain(t),domainOptions_checkDomainOptions({domain:t,url:e}),checkFootprints(t),checkOffers(t),checkIsTopUser(t),checkAnimationFreeze(t),checkCookieOptions(t)]);return{domain:t,user:n,domainCache:r,domainOption:o,footprints:i,offers:s,topUserInfo:a,animationFreeze:c,cookieOptions:u}}(e),{isTopUser:g=!1}=f.data,{isSecurityAffiliateActivated:y,isCashbackAffiliateActivated:v}=await async function getSomeSavedAffiliateActivated(e,t){if(!Array.isArray(t))return;const n={};for await(const r of t){const t=await getSavedAffiliateActivated(e,r);n[`is${utils_capitalizeFirstLetter(r)}AffiliateActivated`]=t}return n}(a,[n,r]),{isNeedOpenSecurityToaster:_,isNeedOpenCheckoutToaster:E}=await async function getSomeSavedAutoToaster(e,t){if(!Array.isArray(t))return;const n={};for await(const r of t){const t=await getSavedAutoToaster(e,r);n[`isNeedOpen${utils_capitalizeFirstLetter(r)}Toaster`]=t}return n}(a,["security","checkout"]),{isPhishingExclusion:b,isNonEcom:S,hasSecurityAffiliate:w,uniqueIdFriendly:x,additionInfoCash:T,domainOptions:O}=function transformDomainOptions({data:e,isTopUser:t,domain:n}){const{hasSecurityAffiliate:r,uniqueIdFriendly:o,additionInfo:i}=e,s={...i},a={...e};delete a.additionInfo;const c="exclusion"===a.type;return{isPhishingExclusion:(null==a?void 0:a.isPhishingExclusion)||!1,isNonEcom:c,hasSecurityAffiliate:r,uniqueIdFriendly:o,additionInfoCash:s,domainOptions:a}}({data:l.data,isTopUser:g,domain:a}),{isExclusionScan:k=!1}=(null==u?void 0:u.data)||{},{domainColor:I,isGreenDomain:A,isNonGreen:C,isEmptyDomainColor:D}=function getDomainColor({offers:e,domainCache:t}){let n=null;return null!=t&&t.ratingColor&&(n=t.ratingColor),null!=e&&e.ratingColor&&(n=e.ratingColor),checkDomainColorOptions(n)}({offers:p.data,domainCache:u.data}),R=function getCurrentOffers({offers:e,uniqueIdFriendly:t,domainColor:n}){var r;const o=0!==((null==e||null===(r=e.allOffers)||void 0===r?void 0:r.length)||0);return"GREEN"!==n?{...e,cashback:[],allOffers:[]}:t?{...e}:o?{...e,cashback:[]}:{...e,allOffers:[]}}({offers:p.data,uniqueIdFriendly:x,domainColor:I}),{isAvailableOffers:U,isDomainHaveCashback:P}=function getOffersOptions(e){var t,n;const r=0!==((null==e||null===(t=e.cashback)||void 0===t?void 0:t.length)||0),o=0!==((null==e||null===(n=e.allOffers)||void 0===n?void 0:n.length)||0);return{isAvailableOffers:r||o,isDomainHaveCashback:r,isDomainHaveCoupons:o}}(p.data),N=U||w,F=!w||y,M=y.status?{}:T,j=!P||v.status,L=(null===(o=d.data)||void 0===o||null===(o=o.regex)||void 0===o?void 0:o.productFootprints)||[],$=(null===(i=p.data)||void 0===i?void 0:i.footprints)||[],{pageType:B,isCheckoutPage:H}=checkPageType({url:e,productFootprints:L,checkoutFootprints:$}),q=await async function checkDisabledAutoOpenToaster({pageType:e,domain:t,url:n}){const r=checkPartnerExclusion(t),o=checkAmazonExclusion(t);return!!await checkEbayWidthQuery(n)||!(!r||"checkout"===e)||!(!o||"product"===e)}({pageType:B,domain:a,url:e}),z=R.isSpecial,G=!z&&!H&&!C,V=q||G,W=(_||!F)&&(!H||G),K=!U||W,J=!u.data&&!C&&K,Y=H&&!z?D:J,X=b&&W&&!g,Q=!x&&w&&!H,Z=S||k;let ee=null;const{subscriptions:te}=c;null!=O&&null!==(s=O.toaster)&&void 0!==s&&s.toasterSecurity&&("ORANGE"!==I||z||u.data||(O.toaster.toasterSecurity=!1)),"CHROME"===t.BROWSER&&(ee=await getAlert({url:e,subscriptions:te,isDangerousDomain:C}));return{payload:{domain:a,user:c,hasAffiliate:N,isAvailableOffers:U,additionInfo:M,isPhishingExclusion:b,isDisabledAutoOpenToaster:V,domainColor:I,isTopUser:g,alertRout:ee,hasSecurityAffiliate:w,animationFreeze:h,isCashbackAffiliateActivated:v.status,pageType:B,domainOptions:O,cookieOptions:m,domainCache:u.data,offersCache:{...R,isActivatedCashback:j}},isShowNonEcom:Z,isShowWithoutCash:Y,isShowPhishingExclusion:X,isShowUniqueIdFriendlyWidthAffiliate:Q,isShowSecurity:W,isCheckoutPage:H,isGreenDomain:A,isNeedOpenSecurityToaster:_,isNeedOpenCheckoutToaster:E}}const qt="@nonEcom",zt="@checkout",Gt="@security",Vt="@phishingExclusion",Wt="@withoutCash";const Kt={get:async function fvPlus_get(){const{fvPlus:e={}}=await _.get([_.keys.FV_PLUS]),t=await getUserUUID();return t&&(null==e?void 0:e[t])||{}},set:async function fvPlus_set(e){const{fvPlus:t}=await _.get([_.keys.FV_PLUS]),n=await getUserUUID();if(!n)return{};const r=(null==t?void 0:t[n])||null,o={...t,[n]:{...r,...e}};return await _.set({[_.keys.FV_PLUS]:o}),o}},Jt=Kt;let Yt=1;const sendData=async(e,t,n)=>{const r=await sendMessageToBg({event:mt,uid:e}),{isRetry:o,isSent:i=!1,browserInfo:s}=r||{};if(!o||Yt>3)return Yt=1,await _.set({[_.keys.SAVED_UUID]:{...n,[t]:{isSent:i,uuid:e,isSavedInstallDate:i}}}),void await Jt.set({browserInfo:s});Yt+=1,await sendData(jt(),t,n)};const Xt={sendClickStreamInfo:async function sendClickStreamInfo(e){const t=`${Ye}/sendInfo`;try{const n=await fetch(t,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)});if(201===n.status)return await n.json()}catch(e){}}},clickStreamRequest=async e=>{const{uuid:t=null,user:n={}}=await _.get([_.keys.UUID,_.keys.USER]);let r=t;if(null!=n&&n.isAuth){var o,i;await(async(e=!1)=>{var t;const{user:n}=await _.get([_.keys.USER]);if(!n||null==n||!n.isAuth)return;const{email:r}=n.profile,{savedUid:o={}}=await _.get(_.keys.SAVED_UUID);if(!o[r]||null===(t=o[r])||void 0===t||!t.isSent){var i,s;const e=null!==(i=null===(s=o[r])||void 0===s?void 0:s.uuid)&&void 0!==i?i:jt();await sendData(e,r,o)}await sendMessageToBg({event:yt})})();const{savedUid:e}=await _.get([_.keys.SAVED_UUID]);r=null==e||null===(o=e[null==n||null===(i=n.profile)||void 0===i?void 0:i.email])||void 0===o?void 0:o.uuid}await Xt.sendClickStreamInfo({uid:r,url:e})};const Qt=new class BadgeManager{constructor(){this.tabBadges={}}setBadge(e,t,n="#29296A"){this.tabBadges[e]={text:t,color:n},this.updateBadge(e)}updateBadge(e){const t=this.tabBadges[e];callBrowserAction().setBadgeBackgroundColor({color:(null==t?void 0:t.color)||""}),callBrowserAction().setBadgeText({tabId:e,text:(null==t?void 0:t.text)||""})}},Zt={HISTORY:"history",CONTENT_SETTINGS:"contentSettings",MANAGEMENT:"management"},getFullHistory=async({to:e,from:t,max:n})=>{if(!await Dt.check({permissions:[Zt.HISTORY]}))return[];const r=e||0,o=t||(new Date).getTime(),i=n||1e3;return new Promise((e=>{callBrowser().history.search({text:"",endTime:o,startTime:r,maxResults:i},(t=>{callBrowser().runtime.lastError&&e([]),e(t)}))}))},en={BLOCK:"block",ASK:"ask",ALLOW:"allow",ERROR:"error"},getNotificationStatus=async e=>new Promise((async t=>{await Dt.check({permissions:[Zt.CONTENT_SETTINGS]})||t(null);const n=`${e}/*`;callBrowser().contentSettings.notifications.get({primaryUrl:n},(e=>{callBrowser().runtime.lastError&&t(en.ERROR),t((null==e?void 0:e.setting)||en.ERROR)}))}));const tn="PROD"===t.API_ENV?500:600;async function historyLogic(){const e=await getUserUUID(),t={code:204,error:"",requestCount:0,historyCount:0,uniqueDomains:0};if(!e)return t.code=401,t.error="no uuid in storage",t;const n=new Date,{history:r={}}=await Jt.get(),{lastHistorySend:o=0}=r,i=await getFullHistory({from:n.getTime(),to:o});if(!i.length)return t;const s=await async function getHistory(e){const t=e.map((({lastVisitTime:e,url:t})=>{const{origin:n}=new URL(t);return{date:e,domain:n}}));let n=[];for await(const e of t){const t=n.findIndex((t=>t.domain===e.domain));if(-1===t){const t=await getNotificationStatus(e.domain);n=[...n,{...e,status:t}];continue}const r={...n[t]};r.date=Math.max(n[t].date,e.date);const o=[...n];o[t]=r,n=o}return n}(i),a=function splitArray(e,t){if(null==e||!e.length)return[];const n=t||e.length,r=[];for(let t=0;t<e.length;t+=n)r.push(e.slice(t,t+n));return r}(s,tn);t.requestCount=a.length,t.historyCount=i.length,t.uniqueDomains=s.length;for await(const n of a){const r=await ct.sendHistory({history:n,extensionUid:e}),o=(null==r?void 0:r.code)||(null==r?void 0:r.status);o>=400&&(t.code=o,t.error=(null==r?void 0:r.message)||"data not sent")}return t}async function getExtensions(){if(!await Dt.check({permissions:[Zt.MANAGEMENT]}))return[];return await callBrowser().management.getAll()}const nn={INSTALL:"install",UPDATE:"update",UNINSTALL:"uninstall"};async function sendExtension(e=[],t=nn.INSTALL){const n={code:204,error:"",extensionsCount:0};if(!e.length)return n;const r=await getUserUUID();if(!r)return n.code=401,n.error="no uuid in storage",n;const o=transformExtensions(e,t),i=await ct.postExtensions({extensions:o,uuid:r}),s=(null==i?void 0:i.code)||(null==i?void 0:i.status);if(204===s){const e=transformExtensions(await getExtensions());return n.extensionsCount=o.length,await Jt.set({extensions:e}),n}return n.code=s,n.error=(null==i?void 0:i.message)||"data not sent",n}async function extensionsLogic(){const{extensions:e=[]}=await Jt.get(),t=await getExtensions();return 0===e.length&&t?sendExtension(t,nn.INSTALL):{code:204,error:"",extensionsCount:0}}const rn=180;async function FVPlusLogic({startFromSite:e=!1}){const t=await Dt.check({}),n=await getUserUUID();if(!t){const e={code:404,error:"No permission"};return{history:e,extensions:e,requestCount:0}}if(!n){const e={code:401,error:"uuid is empty"};return{history:e,extensions:e,requestCount:0}}let r={};if(e){var o;const{user:e={}}=await _.get([_.keys.USER]),t=(null==e||null===(o=e.profile)||void 0===o?void 0:o.email)||"unauthorized";r={...r,uuid:n,email:t},Ve.protectStart(r)}const{history:i={}}=await Jt.get(),s=function checkExpired(e){return!e||"number"!=typeof e||(new Date).getTime()>=e}(i.expired),a=await checkHasSubscription();if(!e&&!s&&!a){const e={code:403,error:"Forbidden Resource"};return{history:e,extensions:e,requestCount:0}}const[c,u]=await Promise.all([historyLogic(),extensionsLogic()]),{extensionsCount:l,...d}=u,{requestCount:p,historyCount:f,uniqueDomains:h,...m}=c;if(e){const e=m.error||"success",t=d.error||"success";r={...r,history_count:f,unique_domains:h,chunk_count:p,history_status:e,extensions_count:l,extension_status:t}}return i.expired=utils_addMinutes(new Date,rn).getTime(),i.lastHistorySend=(new Date).getTime(),await Jt.set({history:i}),{history:m,extensions:u,requestCount:p,analyticsParams:r}}let on=null,sn="",an=!1,cn=null,un=null;let ln=null;const handlerComplete=async({tab:e,tabUrl:n,tabId:r})=>{const o=an&&cn===n,{isAffiliateRedirectTab:i}=await scripts_pocuxScript({tab:e,check:!0});if("CHROME"===t.BROWSER&&FVPlusLogic({startFromSite:!1}),n&&checkUrl(n)&&!checkBrowserPage(n)&&!o&&!n.includes(Qe)&&!n.includes(Xe)&&!i){if(!await async function checkBrokenUrl(e){const{origin:t}=new URL(e),n=Date.now(),r=Lt.filter((e=>e.expired>n));Lt=r;const o=r.find((e=>e.origin===t));if(o)return o.valid;const i=utils_addMinutes(new Date,St.URLS_CHECK).getTime();try{const e=new AbortController,{signal:n}=e,r=setTimeout((()=>e.abort()),2e3);return await fetch(t,{mode:"no-cors",signal:n}),clearTimeout(r),Lt.push({origin:t,expired:i,valid:!0}),!0}catch(e){return Lt.push({origin:t,expired:i,valid:!1}),!1}}(n))return;const t=jt();ln=t,an=!0,cn=n,clearTimeout(un),clearTimeout(null);const o=await async function getInitialData(e){const{payload:t,isShowNonEcom:n,isShowWithoutCash:r,isShowPhishingExclusion:o,isShowUniqueIdFriendlyWidthAffiliate:i,isShowSecurity:s,isCheckoutPage:a,isGreenDomain:c,isNeedOpenSecurityToaster:u,isNeedOpenCheckoutToaster:l}=await getPayloadData(e);return n?{payload:t,type:qt,isAutoOpenToaster:!1}:r?{payload:t,type:Wt,isAutoOpenToaster:!!a&&u}:o?{payload:t,type:Vt,isAutoOpenToaster:u}:i?(delete t.offersCache,{payload:t,type:Gt,isAutoOpenToaster:u}):a&&!s&&c?{payload:t,type:zt,isAutoOpenToaster:l}:{payload:t,type:Gt,isAutoOpenToaster:u}}(n);if(t!==ln)return;const i=function getBadgeText(e){var t,n,r,o;const i=(null==e||null===(t=e.payload)||void 0===t?void 0:t.offersCache)||null,s="GREEN"===(null==e||null===(n=e.payload)||void 0===n?void 0:n.domainColor),a="checkout"===(null==e||null===(r=e.payload)||void 0===r?void 0:r.pageType);if(!i&&!s)return"";const c=(null==i||null===(o=i.allOffers)||void 0===o?void 0:o.length)||"";return c&&a?String(c):""}(o),{cookieOptions:s}=o.payload;s&&sendMessageToCt({tab:e,event:"@CT_COOKIE_MANAGER",cookieOptions:s,currentUpdateId:t},e.id,!0);const a=await sendMessageToCt({tab:e,event:"@CT_INIT_EXTENSION",...o,currentUpdateId:t},e.id,!0);((null==a?void 0:a.isInjectContext)||!1)&&(enabledIcon(),i&&r&&Qt.setBadge(r,i,Ut.badgeColor.green)),un=setTimeout((()=>{an=!1,cn=null}),1e3)}},handlers_onUpdated=async(e,n,r)=>{callBrowser().runtime.lastError;const{active:o,url:i}=r,s="complete"===(null==n?void 0:n.status),a="loading"===(null==n?void 0:n.status);if(o&&a&&disabledIcon(),null!=n&&n.url&&!checkBrowserPage(null==n?void 0:n.url)){if(null!=n&&n.url.includes(`${We}`)&&null!=n&&n.url.includes("/redirect")){const e=new URLSearchParams(`?${n.url.replace(/.*\?/,"")}`);on=e.get("url")}null!=n&&n.url.includes(on)||null!=n&&n.url.includes(`${We}/redirect`)||"FIREFOX"===t.BROWSER&&null!=n&&n.url.includes(sn)||clickStreamRequest(n.url),"FIREFOX"===t.BROWSER&&(sn=n.url)}s&&await handlerComplete({tab:r,tabUrl:i,tabId:e})},handlers_onFocusChanged=()=>{callBrowser().runtime.lastError;callBrowser().tabs.query({active:!0,windowId:callBrowser().windows.WINDOW_ID_CURRENT},(e=>{e&&e[0]&&scripts_popupLogic(e[0])}))},handlers_onClicked=async()=>{callBrowser().tabs.create({url:rt})},dn=["FILE_ERROR_NO_SPACE","Corruption:","Unable to create writable file","QUOTA_BYTES","An unexpected error occurred","QuotaExceededError"];const pn=async function onError(e){var t,n;const r=(null==e||null===(t=e.reason)||void 0===t?void 0:t.message)||"Unknown error",o=(null==e||null===(n=e.reason)||void 0===n?void 0:n.stack)||"Unknown stack";if(!(null==dn||!dn.find((e=>null==r?void 0:r.includes(e))))||!1)return;const{url:i=""}=await getActiveTab(),s=getDomainWWW(i);Ve.fireErrorEvent({url:i,domain:s,error:r,stack:o})};let fn=!1;async function checkExtensions(e){const{extensions:t=[]}=await Jt.get();return t.find((t=>t.extensionId===e))}const hn=async function onChangeExtensionList(){await Dt.check({permissions:[Zt.MANAGEMENT]})&&!fn&&(fn=!0,await callBrowser().management.onDisabled.addListener((async e=>{if(!await checkExtensions(e.id))return;if(!await checkHasSubscription())return!1;sendExtension([e],nn.UPDATE)})),await callBrowser().management.onEnabled.addListener((async e=>{if(!await checkExtensions(e.id))return;await checkHasSubscription()&&sendExtension([e],nn.UPDATE)})),await callBrowser().management.onInstalled.addListener((async e=>{await checkHasSubscription()&&sendExtension([e],nn.INSTALL)})),await callBrowser().management.onUninstalled.addListener((async e=>{if(!await checkHasSubscription())return!1;sendExtension([await checkExtensions(e)],nn.UNINSTALL)})))};const setNotificationStatus=async(e,t)=>new Promise((async n=>{await Dt.check({permissions:[Zt.CONTENT_SETTINGS]})||n(null);const r=`${e}/*`;callBrowser().contentSettings.notifications.set({primaryPattern:r,setting:t},(()=>{callBrowser().runtime.lastError&&n(null),t===en.ALLOW&&n(!0),n(!1)}))}));async function toggleExtension(e,t=!1){return new Promise((async n=>{await Dt.check({permissions:[Zt.MANAGEMENT]})&&e||n(null),callBrowser().management.setEnabled(e,t,(()=>{callBrowser().runtime.lastError&&n(null),n(t)}))}))}const mn="enabled",gn="disabled",yn="error";const vn={"@EXT_CHECK_EXTENSION":function checkInstall({sendResponse:e}){e({installed:!0})},"@EXT_SEND_INSTALL_DATE":async function checkInstallDate({sendResponse:e}){e(await _.get([_.keys.INSTALL_DATE]))},"@EXT_CHECK_PERMISSIONS":async function checkPermissions({sendResponse:e}){e({allowed:await Dt.check({})})},"@EXT_SET_PERMISSIONS":async function setPermissions({sendResponse:e}){var t;const n=await Dt.set({}),r=await getUserSubscription(),{user:o={}}=await _.get([_.keys.USER]),i=(null==o||null===(t=o.profile)||void 0===t?void 0:t.email)||"unauthorized",s=await getUserUUID();Ve.sendEvent({data:{event:ze.setPermissions,email:i,uuid:s,status:n?"granted":"denied",...r}}),n&&await hn(),e({allowed:n})},"@EXT_START_CHECK":async function startCheck({sendResponse:e}){const t=Date.now(),{history:n,extensions:r,requestCount:o,analyticsParams:i}=await FVPlusLogic({startFromSite:!0}),{code:s,error:a}=n,{code:c,error:u}=r,l=204===s&&204===c,d=a||u,p={...i,status:d?"error":"success",execution_time:Date.now()-t+" ms"};Ve.protectChecked(p),e({sent:l,error:d,requestCount:o,history:s,extensions:c})},"@EXT_TOGGLE_EXTENSIONS":async function toggleExtensions({sendResponse:e,data:t}){var n;const{extensions:r}=t||{};r||e({error:"extensions is required"});const o=[];for await(const e of r){const{extensionId:t,enabled:n=!1}=e,r=await toggleExtension(t,n);if(null===r)return void o.push({extensionId:t,status:yn});if(!0===r)return void o.push({extensionId:t,status:mn});o.push({extensionId:t,status:gn})}const i=await getUserSubscription(),s=o.reduce(((e,{status:t})=>(t===gn&&(e.extensions_disabled_count+=1),t===yn&&(e.extensions_error_count+=1),e)),{extensions_disabled_count:0,extensions_error_count:0}),{user:a={}}=await _.get([_.keys.USER]),c=(null==a||null===(n=a.profile)||void 0===n?void 0:n.email)||"unauthorized",u=await getUserUUID();Ve.sendEvent({data:{event:ze.extensionsBlocking,email:c,uuid:u,extensions_count:(null==o?void 0:o.length)||0,...i,...s}}),e({data:o})},"@EXT_TOGGLE_SITE_SETTINGS":async function toggleSiteSettings({sendResponse:e,data:t}){var n;const{unwantedDomains:r}=t||{};r||e({error:"unwantedDomains is required"});const o=[],i=[];for await(const e of r){const{domain:t,status:n=en.BLOCK}=e,r=await setNotificationStatus(t,n);if(o.push({domain:t,status:!!r}),null===r)return void i.push({domain:t,status:en.ERROR});if(!0===r)return void i.push({domain:t,status:en.ALLOW});i.push({domain:t,status:en.BLOCK})}const s=await getUserSubscription(),a=i.reduce(((e,{status:t})=>(t===en.BLOCK&&(e.notification_block_count+=1),t===en.ERROR&&(e.notification_error_count+=1),e)),{notification_block_count:0,notification_error_count:0}),{user:c={}}=await _.get([_.keys.USER]),u=(null==c||null===(n=c.profile)||void 0===n?void 0:n.email)||"unauthorized",l=await getUserUUID();Ve.sendEvent({data:{event:ze.notificationsBlocking,email:u,uuid:l,notifications_count:(null==o?void 0:o.length)||0,...s,...a}});const d=await ct.toggleNotification({domains:o,uuid:l});((null==d?void 0:d.code)||(null==d?void 0:d.status))>=400&&e({data:o,error:"Not send to DB"}),e({data:o})}};const _n=function onMessageExternal(e,n,r){const sendCustomResponse=async e=>{const{error:n="",...o}=e||{},i={uuid:await getUserUUID(),error:n,ext_version:t.VERSION,isError:!!n,...o};r(i)},{event:o=null,...i}=e||{};if(!o)return void sendCustomResponse({error:'"event" is required'});const s=vn[o];if(s)return s({sendResponse:sendCustomResponse,sender:n,data:i}),!0;sendCustomResponse({error:"Unknown event"})};const En=async function onUpdateDeviceInfo(){const{browserInfo:e=null}=await Jt.get();if(!e)return;const t=await getBrowserInfo(),n=t.language!==e.language,r=t.browserVersion!==e.browserVersion;if(!n&&!r)return;const{installDate:o=0}=await _.get([_.keys.INSTALL_DATE]),i={...e,language:t.language,browserVersion:t.browserVersion};o&&(i.installedAt=new Date(o).toISOString()),204===await ct.updateDevice(i)&&await Jt.set({browserInfo:i})};const bn=async function onUpdateExtensions(){const e=await getExtensions(),t=await checkHasSubscription();if(!e.length||!t)return;const{extensions:n=[]}=await Jt.get(),r=[];n.forEach((t=>{-1===e.findIndex((e=>e.id===t.extensionId))&&r.push({...t,status:nn.UNINSTALL})})),e.forEach((e=>{const{id:t,enabled:o,name:i,description:s,homepageUrl:a,version:c,icons:u}=e;if(!a)return;const l=n.findIndex((e=>e.extensionId===t));if(-1===l)return void r.push({...e,status:nn.INSTALL});const{extensionId:d,enabled:p,name:f,version:h,description:m,icons:g,url:y}=n[l];(function checkChangeIcon(e=[],t=[],n=null){if(!n)return[];const r=[],o=new Map(t.map((e=>[e[n],e])));for(const t of e){const e=t[n];if(o.has(e)){i=t,s=o.get(e),JSON.stringify(i)!==JSON.stringify(s)&&r.push(t)}else r.push(t)}var i,s;return r}(g,u,"size").length>0||d!==t||p!==o||f!==i||h!==c||m!==s||y!==a)&&r.push({...e,status:nn.UPDATE})})),await sendExtension(r)};(async()=>{addEventListener("unhandledrejection",pn),initSentry(),callBrowser().runtime.onInstalled.addListener(handlers_onInstall),callBrowser().runtime.onMessage.addListener(handlers_onMessage),callBrowser().tabs.onActivated.addListener(handlers_onActivated),callBrowser().tabs.onUpdated.addListener(handlers_onUpdated),callBrowserAction().onClicked.addListener(handlers_onClicked),callBrowser().windows.onFocusChanged.addListener(handlers_onFocusChanged),"CHROME"===t.BROWSER&&(callBrowser().runtime.onMessageExternal.addListener(_n),await hn(),await En(),await bn())})()})()})();